<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConnectHire - Connect Developers with Employers</title>
    
    <!-- Tailwind CSS (CDN for development - should be compiled for production) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM (Production builds) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX (Development only - should be precompiled for production) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        // Initialize Supabase client
        window.supabaseUrl = 'https://thzhyhjdcqgnlfghlbsi.supabase.co';
        window.supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRoemh5aGpkY3FnbmxmZ2hsYnNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzE0MTcsImV4cCI6MjA3MDgwNzQxN30.K2LoWgrNsSu_MLd4ZK0eJXGuPLqc9jSYNK8VYXrDfR8';
        window.supabaseClient = supabase.createClient(window.supabaseUrl, window.supabaseKey);
    </script>
    
    <style>
        /* Enhanced Dark Theme with Professional Animations */
        :root {
            --primary-bg: #0a0a0a;
            --secondary-bg: #1a1a1a;
            --accent-bg: #2d1b69;
            --card-bg: #1e1e1e;
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --accent-color: #8b5cf6;
            --accent-secondary: #ec4899;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --border-color: #333333;
            --shadow-color: rgba(139, 92, 246, 0.3);
            --glass-bg: rgba(30, 30, 30, 0.85);
            --button-gradient: linear-gradient(135deg, #8b5cf6, #ec4899);
            --button-hover-gradient: linear-gradient(135deg, #7c3aed, #db2777);
        }

        /* Ensure smooth scrolling is disabled to prevent any auto-scroll */
        html {
            scroll-behavior: auto !important;
        }

        body {
            background: var(--primary-bg);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow-x: hidden;
            /* Prevent any layout shifts */
            transform: translateZ(0);
            backface-visibility: hidden;
            line-height: 1.6;
        }

        /* Ensure position: fixed elements anchor to viewport on mobile */
        @media (max-width: 640px) {
            body {
                transform: none !important;
            }
        }

        /* Enhanced Responsive Gradient Background - Static Only */
        .gradient-bg {
            background: radial-gradient(ellipse at center, var(--accent-bg) 0%, var(--secondary-bg) 50%, var(--primary-bg) 100%);
            position: relative;
            min-height: 100vh;
            width: 100%;
        }
        
        /* Responsive gradient adjustments */
        @media (max-width: 768px) {
            .gradient-bg {
                background: radial-gradient(ellipse at center, var(--accent-bg) 0%, var(--secondary-bg) 40%, var(--primary-bg) 100%);
            }
        }
        
        @media (max-width: 480px) {
            .gradient-bg {
                background: radial-gradient(ellipse at center, var(--accent-bg) 0%, var(--secondary-bg) 30%, var(--primary-bg) 100%);
            }
        }

        .gradient-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.2) 0%, transparent 50%);
        }

        /* Enhanced Glass Effect */
        .glass-effect {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Professional Responsive Button Styles */
        .btn-primary {
            background: var(--button-gradient);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 2.75rem;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            width: 100%;
        }
        
        /* Responsive button sizing */
        @media (min-width: 480px) {
            .btn-primary {
                width: auto;
                padding: 0.75rem 1.5rem;
            }
        }
        
        @media (min-width: 768px) {
            .btn-primary {
                padding: 0.875rem 1.75rem;
                font-size: 1rem;
            }
        }

        .btn-primary:hover {
            background: var(--button-hover-gradient);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 2.75rem;
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary:active {
            transform: translateY(0);
        }

        /* Enhanced Profile Header Styling */
        .profile-header {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(139, 92, 246, 0.05) 50%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        .profile-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.25rem;
            background: linear-gradient(135deg, #ffffff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .profile-description {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            line-height: 1.4;
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .profile-description:hover {
            white-space: normal;
            overflow: visible;
            transition: all 0.3s ease;
        }

        /* Enhanced Dashboard Headers */
        .dashboard-header {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(236, 72, 153, 0.15));
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            padding: 1.5rem 0;
            margin-bottom: 2rem;
            position: relative;
        }

        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .dashboard-subtitle {
            font-size: 1.125rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            letter-spacing: 0.025em;
        }

        /* Enhanced Slide Animations - Safe Only */
        .slide-in-left {
            animation: slideInLeft 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .slide-in-right {
            animation: slideInRight 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .slide-in-up {
            animation: slideInUp 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .slide-in-down {
            animation: slideInDown 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .slide-in-3d {
            animation: slideIn3d 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-style: preserve-3d;
        }

        /* Enhanced Fade In */
        .fade-in {
            animation: fadeIn 1s ease-out;
        }

        /* Enhanced Modal Slide In */
        .modal-slide-in {
            animation: modalSlideIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Enhanced Hover Effects - Safe Only */
        .hover-3d:hover {
            transform: translateY(-2px) translateZ(0);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .hover-scale:hover {
            transform: scale(1.05) translateZ(0);
        }

        .hover-rotate:hover {
            transform: rotate(2deg) translateZ(0);
        }

        .hover-lift:hover {
            transform: translateY(-2px) translateZ(0);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        /* Enhanced Bounce Effects - Safe Only */
        .bounce-in {
            animation: bounceIn 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Enhanced Shake Effect */
        .shake {
            animation: shake 0.8s cubic-bezier(0.36, 0.07, 0.19, 0.97);
        }

        /* Enhanced Ripple Effect */
        .ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.4);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .ripple:active::before {
            width: 300px;
            height: 300px;
        }

        /* Enhanced Responsive Skill Tags */
        .skill-tag {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            color: white;
            padding: 0.375rem 0.75rem;
            border-radius: 2rem;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        
        /* Responsive skill tag sizing */
        @media (min-width: 480px) {
            .skill-tag {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }
        }
        
        @media (min-width: 768px) {
            .skill-tag {
                padding: 0.5rem 1.25rem;
                font-size: 0.875rem;
            }
        }

        .skill-tag::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .skill-tag:hover::before {
            left: 100%;
        }

        .skill-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow-color);
        }

        /* Enhanced Loading Spinner */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-top: 2px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Enhanced Neon Glow */
        .neon-glow {
            text-shadow: 
                0 0 5px var(--accent-color),
                0 0 10px var(--accent-color),
                0 0 15px var(--accent-color),
                0 0 20px var(--accent-color);
        }

        /* Enhanced Pulse Border */
        .pulse-border {
            position: relative;
            overflow: hidden;
        }

        .pulse-border::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid transparent;
            border-radius: inherit;
            background: linear-gradient(45deg, var(--accent-color), var(--accent-secondary), var(--accent-color));
            background-size: 200% 200%;
            animation: borderPulse 3s ease-in-out infinite;
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
        }

        /* Enhanced Transform 3D */
        .transform-3d {
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        /* Enhanced Flip In */
        .flip-in {
            animation: flipIn 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-style: preserve-3d;
        }

        /* Enhanced Glow Orange */
        .glow-orange {
            box-shadow: 0 0 20px rgba(249, 115, 22, 0.5);
            animation: glowOrange 2s ease-in-out infinite alternate;
        }

        /* Enhanced Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Enhanced Stagger Delays */
        .stagger-delay-1 { animation-delay: 0.1s; }
        .stagger-delay-2 { animation-delay: 0.2s; }
        .stagger-delay-3 { animation-delay: 0.3s; }
        .stagger-delay-4 { animation-delay: 0.4s; }
        .stagger-delay-5 { animation-delay: 0.5s; }
        
        /* Enhanced Line Clamp */
        .line-clamp-1 { 
            display: -webkit-box; 
            -webkit-line-clamp: 1; 
            line-clamp: 1;
            -webkit-box-orient: vertical; 
            overflow: hidden; 
        }
        .line-clamp-2 { 
            display: -webkit-box; 
            -webkit-line-clamp: 2; 
            line-clamp: 2;
            -webkit-box-orient: vertical; 
            overflow: hidden; 
        }
        .line-clamp-3 { 
            display: -webkit-box; 
            -webkit-line-clamp: 3; 
            line-clamp: 3;
            -webkit-box-orient: vertical; 
            overflow: hidden; 
        }

        /* Enhanced Text Shadow */
        .text-shadow { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); }

        /* Enhanced Backdrop Blur */
        .backdrop-blur-sm { backdrop-filter: blur(4px); }
        .backdrop-blur-md { backdrop-filter: blur(12px); }
        .backdrop-blur-lg { backdrop-filter: blur(16px); }
        .backdrop-blur-xl { backdrop-filter: blur(24px); }

        /* Professional Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 2.75rem;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #7c3aed, #db2777);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 2.75rem;
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary:active {
            transform: translateY(0);
        }

        /* Enhanced Profile Header Styling */
        .profile-header {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(139, 92, 246, 0.05) 50%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        .profile-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.25rem;
            background: linear-gradient(135deg, #ffffff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .profile-description {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            line-height: 1.4;
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .profile-description:hover {
            white-space: normal;
            overflow: visible;
            transition: all 0.3s ease;
        }

        /* Enhanced Dashboard Headers */
        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .dashboard-subtitle {
            font-size: 1.125rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            letter-spacing: 0.025em;
        }

        /* Enhanced Responsive Tab Styling */
        .tab-nav {
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .tab-nav {
                margin-bottom: 2rem;
            }
        }

        .tab-button {
            padding: 0.75rem 1rem;
            border-bottom: 2px solid transparent;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            font-size: 0.75rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        /* Responsive tab button sizing */
        @media (min-width: 480px) {
            .tab-button {
                padding: 0.875rem 1.25rem;
                font-size: 0.875rem;
            }
        }
        
        @media (min-width: 768px) {
            .tab-button {
                padding: 1rem 1.5rem;
                font-size: 0.875rem;
            }
        }

        .tab-button:hover {
            color: white;
            border-bottom-color: rgba(139, 92, 246, 0.5);
        }

        .tab-button.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-color), var(--accent-secondary));
            border-radius: 1px;
        }

        /* Enhanced Search and Filter Styling */
        .search-container {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(20px);
            margin-bottom: 2rem;
        }

        .search-input {
            background: rgba(30, 30, 30, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.25);
            color: #ffffff;
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.15);
            background: rgba(30, 30, 30, 0.95);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Enhanced Responsive Count Badge */
        .count-badge {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            color: white;
            padding: 0.125rem 0.5rem;
            border-radius: 0.75rem;
            font-size: 0.625rem;
            font-weight: 600;
            margin-left: 0.25rem;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
            flex-shrink: 0;
        }
        
        /* Responsive count badge sizing */
        @media (min-width: 480px) {
            .count-badge {
                padding: 0.25rem 0.75rem;
                font-size: 0.75rem;
                margin-left: 0.5rem;
            }
        }

        /* Enhanced Form Styling */
        .form-input {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: white;
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            background: rgba(30, 30, 30, 0.9);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-label {
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        /* Enhanced Button Group Layout */
        .button-group {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: nowrap;
        }

        .button-group .btn-primary,
        .button-group .btn-secondary {
            flex-shrink: 0;
            min-width: fit-content;
        }

        /* Enhanced Profile Info Layout */
        .profile-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            text-align: right;
            min-width: 0;
            flex: 1;
        }

        .profile-info .profile-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        .profile-info .profile-description {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        /* Enhanced Header Layout */
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 2rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
        }

        /* Prevent background scroll when modal is open */
        .no-scroll {
            overflow: hidden;
            height: 100vh;
        }

        /* Floating action button (mobile only) */
        .fab-post-job {
            position: fixed;
            right: calc(1rem + env(safe-area-inset-right, 0));
            bottom: calc(1rem + env(safe-area-inset-bottom, 0));
            z-index: 100;
            width: 3.25rem; /* ~52px */
            height: 3.25rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem; /* 20px icon */
            line-height: 1;
            transform: translateZ(0);
            pointer-events: auto;
        }

        /* Comprehensive Responsive Design System */
        
        /* Extra Large Desktop (1400px and up) */
        @media (min-width: 1400px) {
            .container-xl {
                max-width: 1320px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 4.5rem;
                line-height: 1.1;
            }
            
            .hero-subtitle {
                font-size: 1.5rem;
            }
            
            .grid-xl-4 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Large Desktop (1200px and up) */
        @media (min-width: 1200px) {
            .container-lg {
                max-width: 1140px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 4rem;
            }
            
            .grid-lg-3 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Desktop (992px and up) */
        @media (min-width: 992px) {
            .container-md {
                max-width: 960px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 3.5rem;
            }
            
            .grid-md-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .header-right {
                flex-direction: row;
                gap: 1rem;
            }
        }

        /* Tablet Landscape (768px and up) */
        @media (min-width: 768px) {
            .container-sm {
                max-width: 720px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 3rem;
            }
            
            .hero-subtitle {
                font-size: 1.25rem;
            }
            
            .grid-sm-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .button-group {
                flex-direction: row;
                gap: 0.75rem;
            }
            
            .profile-info {
                align-items: center;
                text-align: left;
            }
        }

        /* Tablet Portrait (576px and up) */
        @media (min-width: 576px) {
            .container-xs {
                max-width: 540px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.125rem;
            }
            
            .btn-primary,
            .btn-secondary {
                padding: 0.875rem 1.75rem;
                font-size: 1rem;
            }
        }

        /* Mobile Landscape (480px and up) */
        @media (min-width: 480px) {
            .hero-title {
                font-size: 2.25rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .button-group {
                flex-direction: row;
                gap: 0.5rem;
            }
            
            .btn-primary,
            .btn-secondary {
                padding: 0.75rem 1.5rem;
                font-size: 0.875rem;
            }
        }

        /* Mobile Portrait (up to 479px) */
        @media (max-width: 479px) {
            .container-fluid {
                padding: 0 0.75rem;
            }
            
            .hero-title {
                font-size: 2rem;
                line-height: 1.2;
            }
            
            .hero-subtitle {
                font-size: 0.875rem;
                line-height: 1.4;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .header-right {
                width: 100%;
                justify-content: space-between;
                flex-direction: column;
                gap: 0.75rem;
            }

            .button-group {
                flex-direction: column;
                width: 100%;
                gap: 0.5rem;
            }

            .button-group .btn-primary,
            .button-group .btn-secondary {
                width: 100%;
                padding: 0.75rem 1rem;
                font-size: 0.875rem;
            }

            .profile-info {
                align-items: flex-start;
                text-align: left;
                width: 100%;
            }

            .profile-info .profile-name,
            .profile-info .profile-description {
                max-width: 100%;
            }
            
            .profile-name {
                font-size: 1rem;
            }
            
            .profile-description {
                font-size: 0.75rem;
            }
            
            .dashboard-title {
                font-size: 1.75rem;
            }
            
            .dashboard-subtitle {
                font-size: 0.875rem;
            }
            
            .card {
                padding: 1rem;
            }
            
            .form-input {
                padding: 0.75rem;
                font-size: 0.875rem;
            }
            
            .skill-tag {
                padding: 0.375rem 0.75rem;
                font-size: 0.75rem;
            }
        }

        /* Tablet Portrait (480px to 767px) */
        @media (min-width: 480px) and (max-width: 767px) {
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .header-right {
                flex-direction: row;
                gap: 0.75rem;
            }
            
            .button-group {
                flex-direction: row;
                gap: 0.5rem;
            }
            
            .profile-info {
                align-items: center;
                text-align: left;
            }
        }

        /* Tablet Landscape (768px to 991px) */
        @media (min-width: 768px) and (max-width: 991px) {
            .hero-title {
                font-size: 3rem;
            }
            
            .hero-subtitle {
                font-size: 1.25rem;
            }
            
            .grid-tablet-2 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Desktop (992px to 1199px) */
        @media (min-width: 992px) and (max-width: 1199px) {
            .hero-title {
                font-size: 3.5rem;
            }
            
            .grid-desktop-3 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Large Desktop (1200px to 1399px) */
        @media (min-width: 1200px) and (max-width: 1399px) {
            .hero-title {
                font-size: 4rem;
            }
            
            .grid-large-4 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Extra Large Desktop (1400px and up) */
        @media (min-width: 1400px) {
            .hero-title {
                font-size: 4.5rem;
            }
            
            .grid-xl-5 {
                grid-template-columns: repeat(5, 1fr);
            }
        }

        /* High DPI Displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .hero-title,
            .dashboard-title {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }

        /* Landscape Orientation */
        @media (orientation: landscape) and (max-height: 500px) {
            .hero-section {
                min-height: 100vh;
                padding: 2rem 0;
            }
            
            .hero-title {
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }
        }

        /* Print Styles */
        @media print {
            .gradient-bg {
                background: white !important;
            }
            
            .glass-effect {
                background: white !important;
                border: 1px solid #ccc !important;
            }
            
            .btn-primary,
            .btn-secondary {
                background: #f0f0f0 !important;
                color: #000 !important;
                border: 1px solid #ccc !important;
            }
        }

        /* Enhanced Responsive Animations */
        
        /* Performance-optimized animations for mobile devices */
        @media (prefers-reduced-motion: reduce) {
            .slide-in-left,
            .slide-in-right,
            .slide-in-up,
            .slide-in-down,
            .slide-in-3d,
            .fade-in,
            .bounce-in,
            .flip-in,
            .hover-3d,
            .hover-scale,
            .hover-rotate,
            .hover-lift {
                animation: none !important;
                transform: none !important;
            }
            
            .pulse-border::before {
                animation: none !important;
            }
            
            .skill-tag::before {
                animation: none !important;
            }
        }
        
        /* Reduced motion for low-end devices */
        @media (max-width: 768px) and (prefers-reduced-motion: no-preference) {
            .slide-in-3d {
                animation: slideInUp 0.6s ease-out;
            }
            
            .hover-3d:hover {
                transform: translateY(-1px);
            }
            
            .hover-scale:hover {
                transform: scale(1.02);
            }
        }
        
        /* High-performance animations for desktop */
        @media (min-width: 1024px) and (prefers-reduced-motion: no-preference) {
            .slide-in-3d {
                animation: slideIn3d 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }
            
            .hover-3d:hover {
                transform: translateY(-4px) translateZ(0);
            }
            
            .hover-scale:hover {
                transform: scale(1.05) translateZ(0);
            }
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Enhanced Form Styling */
        .form-input {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: white;
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            background: rgba(30, 30, 30, 0.9);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-label {
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        /* Enhanced Responsive Card Styling */
        .card {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 1rem;
            padding: 1rem;
            backdrop-filter: blur(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            width: 100%;
        }
        
        /* Responsive card padding */
        @media (min-width: 480px) {
            .card {
                padding: 1.25rem;
            }
        }
        
        @media (min-width: 768px) {
            .card {
                padding: 1.5rem;
            }
        }
        
        @media (min-width: 1024px) {
            .card {
                padding: 2rem;
            }
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(139, 92, 246, 0.4);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-color), var(--accent-secondary));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        /* Enhanced Responsive Tab Styling */
        .tab-nav {
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .tab-nav {
                margin-bottom: 2rem;
            }
        }

        .tab-button {
            padding: 0.75rem 1rem;
            border-bottom: 2px solid transparent;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            font-size: 0.75rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        /* Responsive tab button sizing */
        @media (min-width: 480px) {
            .tab-button {
                padding: 0.875rem 1.25rem;
                font-size: 0.875rem;
            }
        }
        
        @media (min-width: 768px) {
            .tab-button {
                padding: 1rem 1.5rem;
                font-size: 0.875rem;
            }
        }

        .tab-button:hover {
            color: white;
            border-bottom-color: rgba(139, 92, 246, 0.5);
        }

        .tab-button.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-color), var(--accent-secondary));
            border-radius: 1px;
        }

        /* Enhanced Search and Filter Styling */
        .search-container {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            backdrop-filter: blur(20px);
            margin-bottom: 2rem;
        }

        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            background: rgba(255, 255, 255, 0.15);
        }

        /* Enhanced Responsive Count Badge */
        .count-badge {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            color: white;
            padding: 0.125rem 0.5rem;
            border-radius: 0.75rem;
            font-size: 0.625rem;
            font-weight: 600;
            margin-left: 0.25rem;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
            flex-shrink: 0;
        }
        
        /* Responsive count badge sizing */
        @media (min-width: 480px) {
            .count-badge {
                padding: 0.25rem 0.75rem;
                font-size: 0.75rem;
                margin-left: 0.5rem;
            }
        }

        /* Enhanced Modal Styling */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            animation: modalSlideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Enhanced Button Group Layout */
        .button-group {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: nowrap;
        }

        .button-group .btn-primary,
        .button-group .btn-secondary {
            flex-shrink: 0;
            min-width: fit-content;
        }

        /* Enhanced Profile Info Layout */
        .profile-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            text-align: right;
            min-width: 0;
            flex: 1;
        }

        .profile-info .profile-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        .profile-info .profile-description {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        /* Enhanced Header Layout */
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 2rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
        }

        /* Comprehensive Responsive Design System */
        
        /* Extra Large Desktop (1400px and up) */
        @media (min-width: 1400px) {
            .container-xl {
                max-width: 1320px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 4.5rem;
                line-height: 1.1;
            }
            
            .hero-subtitle {
                font-size: 1.5rem;
            }
            
            .grid-xl-4 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Large Desktop (1200px and up) */
        @media (min-width: 1200px) {
            .container-lg {
                max-width: 1140px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 4rem;
            }
            
            .grid-lg-3 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Desktop (992px and up) */
        @media (min-width: 992px) {
            .container-md {
                max-width: 960px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 3.5rem;
            }
            
            .grid-md-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .header-right {
                flex-direction: row;
                gap: 1rem;
            }
        }

        /* Tablet Landscape (768px and up) */
        @media (min-width: 768px) {
            .container-sm {
                max-width: 720px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 3rem;
            }
            
            .hero-subtitle {
                font-size: 1.25rem;
            }
            
            .grid-sm-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .button-group {
                flex-direction: row;
                gap: 0.75rem;
            }
            
            .profile-info {
                align-items: center;
                text-align: left;
            }
        }

        /* Tablet Portrait (576px and up) */
        @media (min-width: 576px) {
            .container-xs {
                max-width: 540px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.125rem;
            }
            
            .btn-primary,
            .btn-secondary {
                padding: 0.875rem 1.75rem;
                font-size: 1rem;
            }
        }

        /* Mobile Landscape (480px and up) */
        @media (min-width: 480px) {
            .hero-title {
                font-size: 2.25rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .button-group {
                flex-direction: row;
                gap: 0.5rem;
            }
            
            .btn-primary,
            .btn-secondary {
                padding: 0.75rem 1.5rem;
                font-size: 0.875rem;
            }
        }

        /* Mobile Portrait (up to 479px) */
        @media (max-width: 479px) {
            .container-fluid {
                padding: 0 0.75rem;
            }
            
            .hero-title {
                font-size: 2rem;
                line-height: 1.2;
            }
            
            .hero-subtitle {
                font-size: 0.875rem;
                line-height: 1.4;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .header-right {
                width: 100%;
                justify-content: space-between;
                flex-direction: column;
                gap: 0.75rem;
            }

            .button-group {
                flex-direction: column;
                width: 100%;
                gap: 0.5rem;
            }

            .button-group .btn-primary,
            .button-group .btn-secondary {
                width: 100%;
                padding: 0.75rem 1rem;
                font-size: 0.875rem;
            }

            .profile-info {
                align-items: flex-start;
                text-align: left;
                width: 100%;
            }

            .profile-info .profile-name,
            .profile-info .profile-description {
                max-width: 100%;
            }
            
            .profile-name {
                font-size: 1rem;
            }
            
            .profile-description {
                font-size: 0.75rem;
            }
            
            .dashboard-title {
                font-size: 1.75rem;
            }
            
            .dashboard-subtitle {
                font-size: 0.875rem;
            }
            
            .card {
                padding: 1rem;
            }
            
            .form-input {
                padding: 0.75rem;
                font-size: 0.875rem;
            }
            
            .skill-tag {
                padding: 0.375rem 0.75rem;
                font-size: 0.75rem;
            }
        }

        /* Tablet Portrait (480px to 767px) */
        @media (min-width: 480px) and (max-width: 767px) {
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .header-right {
                flex-direction: row;
                gap: 0.75rem;
            }
            
            .button-group {
                flex-direction: row;
                gap: 0.5rem;
            }
            
            .profile-info {
                align-items: center;
                text-align: left;
            }
        }

        /* Tablet Landscape (768px to 991px) */
        @media (min-width: 768px) and (max-width: 991px) {
            .hero-title {
                font-size: 3rem;
            }
            
            .hero-subtitle {
                font-size: 1.25rem;
            }
            
            .grid-tablet-2 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Desktop (992px to 1199px) */
        @media (min-width: 992px) and (max-width: 1199px) {
            .hero-title {
                font-size: 3.5rem;
            }
            
            .grid-desktop-3 {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Large Desktop (1200px to 1399px) */
        @media (min-width: 1200px) and (max-width: 1399px) {
            .hero-title {
                font-size: 4rem;
            }
            
            .grid-large-4 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Extra Large Desktop (1400px and up) */
        @media (min-width: 1400px) {
            .hero-title {
                font-size: 4.5rem;
            }
            
            .grid-xl-5 {
                grid-template-columns: repeat(5, 1fr);
            }
        }

        /* High DPI Displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .hero-title,
            .dashboard-title {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }

        /* Landscape Orientation */
        @media (orientation: landscape) and (max-height: 500px) {
            .hero-section {
                min-height: 100vh;
                padding: 2rem 0;
            }
            
            .hero-title {
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }
        }

        /* Print Styles */
        @media print {
            .gradient-bg {
                background: white !important;
            }
            
            .glass-effect {
                background: white !important;
                border: 1px solid #ccc !important;
            }
            
            .btn-primary,
            .btn-secondary {
                background: #f0f0f0 !important;
                color: #000 !important;
                border: 1px solid #ccc !important;
            }
        }

        /* Enhanced Animations */
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn3d {
            from {
                opacity: 0;
                transform: translateZ(-100px) rotateX(10deg);
            }
            to {
                opacity: 1;
                transform: translateZ(0) rotateX(0deg);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes borderPulse {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes flipIn {
            from {
                opacity: 0;
                transform: perspective(400px) rotateY(90deg);
            }
            to {
                opacity: 1;
                transform: perspective(400px) rotateY(0deg);
            }
        }

        @keyframes glowOrange {
            from { box-shadow: 0 0 20px rgba(249, 115, 22, 0.5); }
            to { box-shadow: 0 0 30px rgba(249, 115, 22, 0.8); }
        }

        /* Enhanced Utility Classes */
        .text-gradient {
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .border-gradient {
            border: 2px solid transparent;
            background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary)) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: destination-out;
            mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
        }

        .shadow-glow {
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        .shadow-glow:hover {
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.5);
        }

        /* Enhanced Modal Styling */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            animation: modalSlideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
    </style>
</head>
<body class="bg-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        // Supabase Configuration - Use the global client to avoid multiple instances
        const supabase = window.supabaseClient;

        // Main App Component
        function App() {
            const [currentView, setCurrentView] = React.useState('landing');
            const [currentUser, setCurrentUser] = React.useState(null);
            const [userProfile, setUserProfile] = React.useState(null);
            const [toast, setToast] = React.useState(null);

            React.useEffect(() => {
                checkAuthStatus();
            }, []);

            const checkAuthStatus = async () => {
                try {
                    // Get stored email from localStorage
                    const storedEmail = localStorage.getItem('userEmail');
                    if (!storedEmail) {
                        return; // No stored email, user not authenticated
                    }
                    
                    console.log('Checking auth status for email:', storedEmail);
                    const response = await fetch(`/api/auth/status?email=${encodeURIComponent(storedEmail)}`);
                    if (response.ok) {
                        const data = await response.json();
                        console.log('Auth status response:', data);
                        if (data.authenticated) {
                            setCurrentUser(data.user);
                            if (data.profile) {
                                setUserProfile(data.profile);
                                console.log('User has profile, redirecting to:', data.profile.role === 'developer' ? 'developer-dashboard' : 'employer-dashboard');
                                // User has a profile, redirect to dashboard
                                setCurrentView(data.profile.role === 'developer' ? 'developer-dashboard' : 'employer-dashboard');
                            } else {
                                console.log('User exists but no profile, showing role selection');
                                // User exists but no profile, show role selection
                                setCurrentView('role-selection');
                            }
                        } else {
                            console.log('User not authenticated, clearing state');
                            // Clear any stale state
                            setCurrentUser(null);
                            setUserProfile(null);
                            setCurrentView('landing');
                        }
                    } else {
                        console.error('Auth check failed:', response.status);
                        // Clear any stale state
                        setCurrentUser(null);
                        setUserProfile(null);
                        setCurrentView('landing');
                    }
                } catch (error) {
                    console.error('Auth check error:', error);
                    // Clear any stale state on error
                    setCurrentUser(null);
                    setUserProfile(null);
                    setCurrentView('landing');
                }
            };

            const handleAuthSuccess = (user) => {
                console.log('handleAuthSuccess called with user:', user);
                setCurrentUser(user);
                setCurrentView('role-selection');
            };

            const handleSignOut = async () => {
                try {
                    await fetch('/api/auth/logout', { method: 'POST' });
                    // Clear stored email from localStorage
                    localStorage.removeItem('userEmail');
                setCurrentUser(null);
                setUserProfile(null);
                setCurrentView('landing');
                } catch (error) {
                    console.error('Logout error:', error);
                }
            };

            const showToast = (message, type = 'info') => {
                try {
                    setToast({ message, type });
                    setTimeout(() => setToast(null), 5000);
                } catch (error) {
                    console.error('Error showing toast:', error);
                    // Fallback to console log if toast fails
                    console.log(`[${type.toUpperCase()}] ${message}`);
                }
            };

            const hideToast = () => setToast(null);

                return (
                <div className="min-h-screen page-bg-dark">
                    {/* Static Background - No Animations */}
                    <div className="absolute inset-0 pointer-events-none">
                        {/* Static gradient background - No movement */}
                        <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 opacity-100"></div>
                        </div>

                    {/* Content */}
                    <div className="relative z-10">
                    {currentView === 'landing' && (
                        <LandingPage onGetStarted={() => setCurrentView('auth')} />
                    )}
                    {currentView === 'auth' && (
                        <AuthView onAuthSuccess={handleAuthSuccess} />
                    )}
                    {currentView === 'role-selection' && (
                        <RoleSelectionView 
                            user={currentUser}
                            onProfileComplete={(profile) => {
                                setUserProfile(profile);
                                setCurrentView(profile.role === 'developer' ? 'developer-dashboard' : 'employer-dashboard');
                            }}
                            showToast={showToast}
                        />
                    )}
                    {currentView === 'developer-dashboard' && (
                        <DeveloperDashboard 
                            user={currentUser} 
                            profile={userProfile} 
                            onSignOut={handleSignOut}
                            showToast={showToast}
                                onProfileUpdate={(updatedProfile) => {
                                    setUserProfile(updatedProfile);
                                    showToast('Profile updated successfully!', 'success');
                                }}
                        />
                    )}
                    {currentView === 'employer-dashboard' && (
                        <EmployerDashboard 
                            user={currentUser} 
                            profile={userProfile} 
                            onSignOut={handleSignOut}
                            showToast={showToast}
                                onProfileUpdate={(updatedProfile) => {
                                    setUserProfile(updatedProfile);
                                    showToast('Profile updated successfully!', 'success');
                                }}
                        />
                    )}
                    
                    {/* Toast Notification */}
                    {toast && (
                        <ToastNotification
                            message={toast.message}
                            type={toast.type}
                            onClose={hideToast}
                        />
                    )}
                    </div>
                </div>
            );
        }

        // Landing Page Component
        function LandingPage({ onGetStarted }) {
            const [showLearnMore, setShowLearnMore] = React.useState(false);

            return (
                <div className="min-h-screen gradient-bg">
                    {/* Learn More Modal */}
                    <LearnMoreModal isOpen={showLearnMore} onClose={() => setShowLearnMore(false)} />
                    
                    {/* Static Background - No Animations */}
                    <div className="absolute inset-0 pointer-events-none">
                        {/* Static gradient background - No movement */}
                        <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 opacity-100"></div>
                    </div>

                    {/* Navigation */}
                    <nav className="relative z-10 px-6 py-4">
                        <div className="max-w-7xl mx-auto flex justify-between items-center">
                            <div className="text-2xl font-bold text-white">🚀 ConnectHire</div>
                            <button 
                                onClick={onGetStarted}
                                className="bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-2 rounded-full font-semibold hover:from-orange-600 hover:to-red-600 transition-all hover-3d glow-orange flip-in"
                            >
                                Get Started
                            </button>
                        </div>
                    </nav>

                    {/* Hero Section */}
                    <div className="relative z-10 flex items-center justify-center min-h-screen px-3 sm:px-4 md:px-6 py-8 sm:py-12">
                        <div className="text-center text-white max-w-4xl">
                            <h1 className="hero-title text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl 2xl:text-7xl font-bold mb-4 sm:mb-6 slide-in-3d">
                                Connect <span className="gradient-text neon-glow">Developers</span> with <span className="gradient-text neon-glow">Employers</span>
                            </h1>
                            <p className="hero-subtitle text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl mb-6 sm:mb-8 text-white/90 slide-in-3d" style={{animationDelay: '0.2s'}}>
                                The ultimate platform for finding freelance, temporary, and part-time opportunities
                            </p>
                            <div className="flex flex-col xs:flex-row gap-3 sm:gap-4 justify-center slide-in-3d" style={{animationDelay: '0.4s'}}>
                                <button 
                                    onClick={onGetStarted}
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full text-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all hover-3d pulse-border neon-glow flip-in"
                                >
                                    Start Your Journey
                                </button>
                                <button 
                                    onClick={() => setShowLearnMore(true)}
                                    className="bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-8 py-4 rounded-full text-lg font-semibold hover:from-cyan-600 hover:to-blue-600 transition-all hover-3d pulse-border neon-glow flip-in" 
                                    style={{animationDelay: '0.1s'}}
                                >
                                    Learn More
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Features Section */}
                    <div className="relative z-10 pb-12 sm:pb-16 md:pb-20 px-3 sm:px-4 md:px-6">
                        <div className="max-w-7xl mx-auto">
                            <h2 className="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white text-center mb-8 sm:mb-12 md:mb-16 slide-in-3d neon-glow">Why Choose ConnectHire?</h2>
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
                                {[
                                        { icon: '💼', title: 'Smart Matching', desc: 'AI-powered job matching based on skills and preferences', color: 'from-purple-500 to-pink-500', animation: 'slide-in-3d' },
                                        { icon: '🔒', title: 'Secure OTP', desc: 'Email verification for secure authentication', color: 'from-green-500 to-emerald-500', animation: 'slide-in-3d' },
                                        { icon: '🚀', title: 'Fast & Easy', desc: 'Quick setup and seamless user experience', color: 'from-blue-500 to-cyan-500', animation: 'slide-in-3d' }
                                ].map((feature, index) => (
                                        <div key={index} className={`glass-effect rounded-2xl p-8 text-center hover-3d bg-gradient-to-br ${feature.color} ${feature.animation} transform-3d pulse-border`} style={{animationDelay: `${0.6 + index * 0.1}s`}}>
                                            <div className={`text-5xl mb-4 slide-in-3d`}>{feature.icon}</div>
                                        <h3 className="text-xl font-semibold text-white mb-3 neon-glow">{feature.title}</h3>
                                        <p className="text-white/80">{feature.desc}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Learn More Modal Component
        function LearnMoreModal({ isOpen, onClose }) {
            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center transform-3d">
                    <div className="bg-white rounded-2xl p-8 max-w-4xl mx-4 max-h-[90vh] overflow-y-auto modal-slide-in shadow-2xl">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-3xl font-bold text-gray-800">About ConnectHire</h2>
                            <button 
                                onClick={onClose}
                                className="text-gray-500 hover:text-gray-700 text-2xl hover-3d"
                            >
                                ×
                            </button>
                        </div>
                        
                        <div className="space-y-6 text-gray-700">
                            <div className="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-l-4 border-purple-500">
                                <h3 className="text-xl font-semibold text-purple-700 mb-3">🎯 Our Mission</h3>
                                <p className="leading-relaxed">
                                    ConnectHire bridges the gap between talented developers and innovative employers. 
                                    We believe in creating meaningful connections that drive technological advancement 
                                    and career growth.
                                </p>
                            </div>

                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                <div className="bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-xl border-l-4 border-blue-500">
                                    <h3 className="text-xl font-semibold text-blue-700 mb-3">👨‍💻 For Developers</h3>
                                    <ul className="space-y-2 text-sm">
                                        <li>• Showcase your skills with detailed profiles</li>
                                        <li>• Apply to jobs that match your expertise</li>
                                        <li>• Track application status in real-time</li>
                                        <li>• Receive notifications for new opportunities</li>
                                    </ul>
                                </div>

                                <div className="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border-l-4 border-green-500">
                                    <h3 className="text-xl font-semibold text-green-700 mb-3">🏢 For Employers</h3>
                                    <ul className="space-y-2 text-sm">
                                        <li>• Post detailed job requirements</li>
                                        <li>• Review applications with cover letters</li>
                                        <li>• Shortlist candidates efficiently</li>
                                        <li>• Manage your hiring pipeline</li>
                                    </ul>
                                </div>
                            </div>

                            <div className="bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-xl border-l-4 border-orange-500">
                                <h3 className="text-xl font-semibold text-orange-700 mb-3">🔒 Security & Privacy</h3>
                                <p className="leading-relaxed mb-3">
                                    Your data security is our priority. We use industry-standard encryption and 
                                    secure OTP verification to ensure your information remains protected.
                                </p>
                                <div className="flex flex-wrap gap-2">
                                    <span className="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">Email Verification</span>
                                    <span className="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">Data Encryption</span>
                                    <span className="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">Secure API</span>
                                </div>
                            </div>

                            <div className="text-center pt-4">
                                <button 
                                    onClick={onClose}
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-full font-semibold hover:from-purple-600 hover:to-pink-600 transition-all hover-3d"
                                >
                                    Get Started Now
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Authentication Component
        function AuthView({ onAuthSuccess }) {
            const [email, setEmail] = React.useState('');
            const [otp, setOtp] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            const [message, setMessage] = React.useState('');
            const [isSignUp, setIsSignUp] = React.useState(false);
            const [showOtpInput, setShowOtpInput] = React.useState(false);
            const [otpSent, setOtpSent] = React.useState(false);

            const sendOTP = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                setMessage('');

                try {
                    const response = await fetch('/api/send-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            email: email,
                            purpose: isSignUp ? 'signup' : 'signin'
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        setMessage('✅ OTP sent to your email! Please check your inbox.');
                        setShowOtpInput(true);
                        setOtpSent(true);
                    } else {
                        setMessage('❌ Error: ' + data.error);
                    }
                } catch (error) {
                    setMessage('❌ Error: Failed to send OTP. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            const verifyOTP = async (e) => {
                e.preventDefault();
                setIsLoading(true);
                setMessage('');

                try {
                    const response = await fetch('/api/verify-otp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            email: email,
                            otp: otp,
                            purpose: isSignUp ? 'signup' : 'signin'
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        setMessage('✅ Authentication successful!');
                        // Store email in localStorage for auth status checks
                        localStorage.setItem('userEmail', email);
                        const mockUser = {
                            id: data.user.id,
                            email: email,
                            user_metadata: { role: 'pending' }
                        };
                        onAuthSuccess(mockUser);
                    } else {
                        setMessage('❌ Error: ' + data.error);
                    }
                } catch (error) {
                    setMessage('❌ Error: Failed to verify OTP. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            const resetForm = () => {
                setEmail('');
                setOtp('');
                setShowOtpInput(false);
                setOtpSent(false);
                setMessage('');
            };

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
                    <div className="glass-effect rounded-3xl p-10 w-full max-w-md hover-lift">
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-bold text-white mb-3">🚀 ConnectHire</h1>
                            <p className="text-white/80 text-lg">Connect developers with employers</p>
                        </div>

                        {!showOtpInput ? (
                            <form onSubmit={sendOTP} className="space-y-6">
                                <div>
                                    <label className="block text-white text-sm font-medium mb-3">
                                        Email Address
                                    </label>
                                    <input
                                        type="email"
                                        value={email}
                                        onChange={(e) => setEmail(e.target.value)}
                                        className="w-full px-4 py-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                        placeholder="Enter your email"
                                        required
                                    />
                                </div>

                                <button
                                    type="submit"
                                    disabled={isLoading}
                                    className="w-full bg-white text-purple-600 py-4 px-6 rounded-xl font-semibold hover:bg-white/90 transition-all disabled:opacity-50 hover-lift"
                                >
                                    {isLoading ? 'Sending OTP...' : (isSignUp ? 'Sign Up with OTP' : 'Sign In with OTP')}
                                </button>
                            </form>
                        ) : (
                            <form onSubmit={verifyOTP} className="space-y-6">
                                <div>
                                    <label className="block text-white text-sm font-medium mb-3">
                                        Enter OTP Code
                                    </label>
                                    <input
                                        type="text"
                                        value={otp}
                                        onChange={(e) => setOtp(e.target.value)}
                                        className="w-full px-4 py-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 text-center text-3xl tracking-widest focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all"
                                        placeholder="000000"
                                        maxLength="6"
                                        required
                                    />
                                    <p className="text-white/60 text-sm mt-3 text-center">
                                        Enter the 6-digit code sent to your email
                                    </p>
                                </div>

                                <button
                                    type="submit"
                                    disabled={isLoading}
                                    className="w-full bg-white text-purple-600 py-4 px-6 rounded-xl font-semibold hover:bg-white/90 transition-all disabled:opacity-50 hover-lift"
                                >
                                    {isLoading ? 'Verifying...' : 'Verify OTP'}
                                </button>

                                <button
                                    type="button"
                                    onClick={resetForm}
                                    className="w-full bg-transparent border-2 border-white/20 text-white py-4 px-6 rounded-xl font-semibold hover:bg-white/10 transition-all hover-lift"
                                >
                                    ← Back to Email
                                </button>
                            </form>
                        )}

                        {!showOtpInput && (
                            <div className="mt-8 text-center">
                                <button
                                    onClick={() => setIsSignUp(!isSignUp)}
                                    className="text-white/70 hover:text-white text-sm underline transition-colors"
                                >
                                    {isSignUp ? 'Already have an account? Sign In' : 'New user? Sign Up'}
                                </button>
                            </div>
                        )}

                        {message && (
                            <div className={`mt-6 p-4 rounded-xl text-center transition-all ${
                                message.includes('✅') ? 'bg-green-500/20 text-green-200' : 'bg-red-500/20 text-red-200'
                            }`}>
                                {message}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Role Selection Component
        function RoleSelectionView({ user, onProfileComplete, showToast }) {
            const [selectedRole, setSelectedRole] = React.useState(null);
            const [isCheckingProfile, setIsCheckingProfile] = React.useState(true);
            const [hasExistingProfile, setHasExistingProfile] = React.useState(false);
            
            console.log('RoleSelectionView rendered with:', { user, showToast: typeof showToast });

            // Check if user already has a profile when component mounts
            React.useEffect(() => {
                const checkExistingProfile = async () => {
                    if (!user || !user.id) {
                        setIsCheckingProfile(false);
                        return;
                    }

                    try {
                        console.log('RoleSelectionView: Checking for existing profile for user:', user.id);
                        // Check both developer and employer profiles
                        const [devResponse, empResponse] = await Promise.all([
                            fetch(`/api/developer-profile/${user.id}`),
                            fetch(`/api/employer-profile/${user.id}`)
                        ]);

                        if (devResponse.ok) {
                            const devData = await devResponse.json();
                            if (devData.success && devData.profile) {
                                console.log('RoleSelectionView: Found existing developer profile');
                                setHasExistingProfile(true);
                                onProfileComplete(devData.profile);
                                return;
                            }
                        }

                        if (empResponse.ok) {
                            const empData = await empResponse.json();
                            if (empData.success && empData.profile) {
                                console.log('RoleSelectionView: Found existing employer profile');
                                setHasExistingProfile(true);
                                onProfileComplete(empData.profile);
                                return;
                            }
                        }

                        console.log('RoleSelectionView: No existing profile found');
                        setIsCheckingProfile(false);
                    } catch (error) {
                        console.error('RoleSelectionView: Error checking existing profile:', error);
                        setIsCheckingProfile(false);
                    }
                };

                checkExistingProfile();
            }, [user, onProfileComplete]);

            // Show loading while checking for existing profile
            if (isCheckingProfile) {
                return (
                    <div className="min-h-screen gradient-bg flex items-center justify-center p-4 relative overflow-hidden">
                        <div className="glass-effect rounded-3xl p-10 w-full max-w-4xl hover-lift relative z-10 text-center">
                            <div className="text-4xl mb-6">⏳</div>
                            <h2 className="text-2xl font-bold text-white mb-4">Checking your profile...</h2>
                            <p className="text-white/70">Please wait while we load your information</p>
                        </div>
                    </div>
                );
            }

            // Don't render role selection if user already has a profile
            if (hasExistingProfile) {
                return null;
            }

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-4 relative overflow-hidden">
                    <div className="glass-effect rounded-3xl p-4 sm:p-6 md:p-8 lg:p-10 w-full max-w-4xl hover-lift relative z-10">
                        
                        <div className="text-center mb-10">
                            <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold gradient-text mb-4 slide-in-down neon-glow">Choose Your Role</h1>
                            <p className="text-white/80 text-base sm:text-lg md:text-xl slide-in-up stagger-delay-1">Tell us how you'll use ConnectHire</p>
                        </div>

                        {!selectedRole ? (
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8">
                                <div
                                    onClick={() => setSelectedRole('developer')}
                                    className="glass-effect rounded-2xl p-4 sm:p-6 md:p-8 cursor-pointer hover:bg-white/10 transition-all text-center hover-lift group slide-in-left stagger-delay-2 pulse-border"
                                >
                                    <div className="text-6xl mb-6 group-hover:scale-110 transition-transform neon-glow">👨‍💻</div>
                                    <h3 className="text-2xl font-semibold text-white mb-4 neon-glow">I'm a Developer</h3>
                                    <p className="text-white/70 text-lg">Find freelance, temporary, and part-time opportunities</p>
                                    <div className="mt-6 text-white/50 text-sm">
                                        ✓ Browse available jobs<br/>
                                        ✓ Apply with one click<br/>
                                        ✓ Track applications<br/>
                                        ✓ Build your portfolio
                                    </div>
                                </div>

                                <div
                                    onClick={() => setSelectedRole('employer')}
                                    className="glass-effect rounded-2xl p-4 sm:p-6 md:p-8 cursor-pointer hover:bg-white/10 transition-all text-center hover-lift group slide-in-right stagger-delay-3 pulse-border"
                                >
                                    <div className="text-6xl mb-6 group-hover:scale-110 transition-transform neon-glow" style={{animationDelay: '1s'}}>🏢</div>
                                    <h3 className="text-2xl font-semibold text-white mb-4 neon-glow">I'm an Employer</h3>
                                    <p className="text-white/70 text-lg">Hire talented developers for your projects</p>
                                    <div className="mt-6 text-white/50 text-sm">
                                        ✓ Post job opportunities<br/>
                                        ✓ Review applications<br/>
                                        ✓ Connect with developers<br/>
                                        ✓ Manage hiring process
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <ProfileForm 
                                role={selectedRole} 
                                user={user}
                                onComplete={onProfileComplete}
                                onBack={() => setSelectedRole(null)}
                                showToast={showToast}
                            />
                        )}
                    </div>
                </div>
            );
        }

        // Profile Form Component
        function ProfileForm({ role, user, onComplete, onBack, isModal = false, existingProfile, showToast }) {
            const [formData, setFormData] = React.useState({});
            const [isLoading, setIsLoading] = React.useState(false);
            const [skills, setSkills] = React.useState([]);
            const [availableSkills, setAvailableSkills] = React.useState([]);
            const [newSkill, setNewSkill] = React.useState('');
            const [photoUploading, setPhotoUploading] = React.useState(false);
            const [resumeUploading, setResumeUploading] = React.useState(false);
            const [logoUploading, setLogoUploading] = React.useState(false);
            
            // Validate required props
            if (!user || !user.id) {
                console.error('ProfileForm: Invalid user object:', user);
                return (
                    <div className="text-center text-white p-8">
                        <p className="text-xl text-red-400">Error: Invalid user data</p>
                        <p className="text-white/70 mt-2">Please try refreshing the page</p>
                    </div>
                );
            }
            
            if (!role || !['developer', 'employer'].includes(role)) {
                console.error('ProfileForm: Invalid role:', role);
                return (
                    <div className="text-center text-white p-8">
                        <p className="text-xl text-red-400">Error: Invalid role selected</p>
                        <p className="text-white/70 mt-2">Please try selecting a role again</p>
                    </div>
                );
            }

            React.useEffect(() => {
                console.log('ProfileForm useEffect triggered with:', { role, userId: user.id, existingProfile });
                loadSkills();
                if (existingProfile) {
                    console.log('Using provided existing profile:', existingProfile);
                    setFormData(existingProfile);
                    if (role === 'developer' && existingProfile.skills) {
                        setSkills(existingProfile.skills);
                    }
                } else {
                    console.log('No existing profile provided, loading from API');
                loadExistingProfile();
                }
            }, [role, user.id, existingProfile]);

            const loadExistingProfile = async () => {
                try {
                    console.log('Loading existing profile for user:', user.id, 'role:', role);
                    const endpoint = role === 'developer' ? '/api/developer-profile' : '/api/employer-profile';
                    const response = await fetch(`${endpoint}/${user.id}`);
                    console.log('Profile API response status:', response.status);
                    
                    if (response.ok) {
                        const data = await response.json();
                        console.log('Profile API response data:', data);
                        if (data.success && data.profile) {
                            console.log('Existing profile found, redirecting to dashboard');
                            // User already has a profile, redirect them to dashboard
                            onComplete(data.profile);
                            return;
                        } else if (data.success && !data.profile) {
                            console.log('No existing profile found for user:', user.id);
                        } else {
                            console.log('Profile API returned error:', data.error);
                        }
                    } else {
                        console.log('Profile API failed with status:', response.status);
                        const errorData = await response.json().catch(() => ({}));
                        console.log('Profile API error data:', errorData);
                    }
                } catch (error) {
                    console.log('Error loading existing profile:', error);
                    // Silently handle error - profile doesn't exist yet
                }
            };

            const loadSkills = async () => {
                try {
                    const response = await fetch('/api/skills');
                    if (!response.ok) {
                        console.error('Skills API failed:', response.status);
                        return;
                    }
                    const data = await response.json();
                    if (data.success) {
                        console.log('Skills loaded:', data.skills.length);
                        setAvailableSkills(data.skills);
                    } else {
                        console.error('Failed to load skills:', data.error);
                    }
                } catch (error) {
                    console.error('Error loading skills:', error);
                    // Set default skills if API fails
                    setAvailableSkills(['JavaScript', 'React', 'Node.js', 'Python', 'Java', 'C++', 'HTML', 'CSS', 'SQL', 'Git']);
                }
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                console.log('ProfileForm handleSubmit called with:', { role, formData, skills, existingProfile });
                
                // Validate required fields
                if (role === 'developer') {
                    if (!formData.name || !formData.age || !formData.address || !formData.preferred_job_location || !formData.experience || !formData.short_description || skills.length === 0) {
                        const errorMessage = 'Please fill in all required fields: Name, Age, Address, Preferred Job Location, Experience, Short Description, and at least one skill.';
                        console.log('Validation failed:', { name: formData.name, age: formData.age, address: formData.address, preferred_job_location: formData.preferred_job_location, short_description: formData.short_description, skills: skills.length });
                        if (typeof showToast === 'function') {
                            showToast(errorMessage, 'error');
                        } else {
                            alert(errorMessage);
                        }
                        return;
                    }
                } else if (role === 'employer') {
                    if (!formData.name || !formData.company_name || !formData.company_location) {
                        const errorMessage = 'Please fill in all required fields: Name, Company Name, and Company Location.';
                        console.log('Validation failed:', { name: formData.name, company_name: formData.company_name, company_location: formData.company_location });
                        if (typeof showToast === 'function') {
                            showToast(errorMessage, 'error');
                        } else {
                            alert(errorMessage);
                        }
                        return;
                    }
                } else {
                    console.error('Invalid role:', role);
                    if (typeof showToast === 'function') {
                        showToast('Invalid role selected. Please try again.', 'error');
                    } else {
                        alert('Invalid role selected. Please try again.');
                    }
                    return;
                }

                console.log('Validation passed, proceeding with submission');
                setIsLoading(true);

                try {
                    const endpoint = role === 'developer' ? '/api/developer-profile' : '/api/employer-profile';
                    const method = existingProfile ? 'PUT' : 'POST';
                    
                    const skillsToSubmit = role === 'developer' ? skills : [];
                    console.log('Skills to submit:', skillsToSubmit);
                    
                    const requestBody = {
                        userId: user.id,
                        ...formData,
                        ...(role === 'developer' && { skills: skillsToSubmit })
                    };
                    
                    // Remove role field from request body as it's not a database column
                    const { role: _, ...cleanRequestBody } = requestBody;
                    
                    console.log('Request body:', requestBody);
                    console.log('Clean request body:', cleanRequestBody);
                    console.log('Making request to:', endpoint, 'with method:', method);

                    const response = await fetch(endpoint, {
                        method: method,
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(cleanRequestBody)
                    });

                    console.log('Response status:', response.status);
                    
                    if (!response.ok) {
                        let errorText = 'Unknown server error';
                        try {
                            errorText = await response.text();
                        } catch (textError) {
                            console.error('Error reading response text:', textError);
                        }
                        throw new Error(`Server error: ${response.status} - ${errorText}`);
                    }

                    let data;
                    try {
                        data = await response.json();
                        console.log('Response data:', data);
                    } catch (jsonError) {
                        console.error('Error parsing JSON response:', jsonError);
                        throw new Error('Invalid server response format');
                    }
                    
                    if (data && data.success) {
                        console.log('Profile saved successfully:', data.profile);
                        
                        if (typeof showToast === 'function') {
                            showToast('Profile saved successfully!', 'success');
                        }
                        
                        // Call onComplete with the updated profile
                        try {
                            onComplete({ ...data.profile, role: role });
                        } catch (callbackError) {
                            console.error('Error in onComplete callback:', callbackError);
                            if (typeof showToast === 'function') {
                                showToast('Profile saved but there was an error redirecting. Please refresh the page.', 'warning');
                            }
                        }
                    } else {
                        throw new Error(data?.error || 'Failed to save profile');
                    }
                } catch (error) {
                    console.error('Error saving profile:', error);
                    if (typeof showToast === 'function') {
                        showToast(`Error saving profile: ${error.message}`, 'error');
                    } else {
                        alert(`Error saving profile: ${error.message}`);
                    }
                } finally {
                    setIsLoading(false);
                }
            };

            const handleInputChange = (field, value) => {
                try {
                    setFormData(prev => ({ ...prev, [field]: value }));
                } catch (error) {
                    console.error('Error updating form data:', error);
                }
            };

            const addSkill = () => {
                try {
                    if (newSkill.trim() && !skills.includes(newSkill.trim())) {
                        setSkills(prev => [...prev, newSkill.trim()]);
                        setNewSkill('');
                    }
                } catch (error) {
                    console.error('Error adding skill:', error);
                }
            };

            const removeSkill = (skillToRemove) => {
                try {
                    setSkills(prev => prev.filter(skill => skill !== skillToRemove));
                } catch (error) {
                    console.error('Error removing skill:', error);
                }
            };

            const handleSkillKeyPress = (e) => {
                try {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        addSkill();
                    }
                } catch (error) {
                    console.error('Error handling skill key press:', error);
                }
            };

            const uploadFile = async (file, uploadType, fieldKey, setUploading) => {
                if (!file) return;
                if (!existingProfile && !formData.id) {
                    if (typeof showToast === 'function') {
                        showToast('Please save your profile first, then upload.', 'warning');
                    } else {
                        alert('Please save your profile first, then upload.');
                    }
                    return;
                }
                try {
                    setUploading(true);

                    // Map upload type to Cloudinary preset and resource type
                    const cloudName = 'dohxvu206';
                    const uploadPreset = 'Connect_Hire';
                    const resourceType = 'auto';
                    let afterSaveEndpoint = '';
                    let afterSaveBody = {};

                    if (uploadType === 'developer_photo') {
                        afterSaveEndpoint = '/api/developer-profile';
                        afterSaveBody = { userId: user.id, photo_url: null };
                    } else if (uploadType === 'developer_resume') {
                        afterSaveEndpoint = '/api/developer-profile';
                        afterSaveBody = { userId: user.id, resume_url: null };
                    } else if (uploadType === 'employer_logo') {
                        afterSaveEndpoint = '/api/employer-profile';
                        afterSaveBody = { userId: user.id, company_logo_url: null };
                    } else {
                        throw new Error('Unknown upload type');
                    }

                    const form = new FormData();
                    form.append('file', file);
                    form.append('upload_preset', uploadPreset);

                    const cloudinaryUrl = `https://api.cloudinary.com/v1_1/${cloudName}/auto/upload`;
                    const res = await fetch(cloudinaryUrl, { method: 'POST', body: form });
                    const data = await res.json();
                    if (!res.ok || !data.secure_url) {
                        throw new Error(data.error?.message || JSON.stringify(data));
                    }

                    const secureUrl = data.secure_url;
                    setFormData(prev => ({ ...prev, [fieldKey]: secureUrl }));

                    // Persist URL to Supabase via existing profile update endpoint
                    const saveRes = await fetch(afterSaveEndpoint, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            ...afterSaveBody,
                            [fieldKey]: secureUrl
                        })
                    });
                    if (!saveRes.ok) {
                        const txt = await saveRes.text();
                        throw new Error(`Failed to save URL: ${txt}`);
                    }

                    if (typeof showToast === 'function') {
                        showToast('Upload successful!', 'success');
                    }
                } catch (err) {
                    console.error('Upload error:', err);
                    if (typeof showToast === 'function') {
                        showToast(`Upload error: ${err.message}`, 'error');
                    } else {
                        alert(`Upload error: ${err.message}`);
                    }
                } finally {
                    setUploading(false);
                }
            };

            return (
                <div className={`${isModal ? 'w-full' : 'max-w-4xl mx-auto'} card rounded-2xl p-8 shadow-2xl`}>
                    {/* Static Background - No Animations */}
                    <div className="absolute inset-0 transform-3d rounded-2xl pointer-events-none">
                        {/* Static gradient background - No movement */}
                        <div className="absolute inset-0 bg-gradient-to-br from-gray-800 via-purple-800 to-gray-800 opacity-100 rounded-2xl"></div>
                    </div>

                    <div className="relative z-10">
                        {/* Header */}
                        <div className="text-center mb-8">
                            {!isModal && onBack && (
                            <button
                                onClick={onBack}
                                    className="absolute left-0 top-0 text-white/70 hover:text-white transition-colors ripple"
                            >
                                ← Back
                            </button>
                            )}
                            <h2 className="text-3xl font-bold text-white neon-glow mb-4">
                                {existingProfile ? 'Edit Profile' : 'Complete Your Profile'}
                            </h2>
                            <p className="text-white/70 mt-2 text-lg">
                                {role === 'developer' ? 'Tell employers about yourself' : 'Tell developers about your company'}
                            </p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                        {role === 'developer' ? (
                            // Developer Profile Fields
                            <>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                        <div className="slide-in-left stagger-delay-1">
                                            <label className="form-label">
                                                Your Name *
                                        </label>
                                        <input
                                            type="text"
                                            required
                                            value={formData.name || ''}
                                            onChange={(e) => handleInputChange('name', e.target.value)}
                                                className="form-input w-full"
                                            placeholder="Your full name"
                                        />
                                    </div>
                                        <div className="slide-in-right stagger-delay-2">
                                                                                    <label className="form-label">
                                            Age *
                                        </label>
                                        <input
                                            type="number"
                                            required
                                                min="18"
                                            max="100"
                                            value={formData.age || ''}
                                            onChange={(e) => handleInputChange('age', parseInt(e.target.value))}
                                                className="form-input w-full"
                                                placeholder="Your age"
                                        />
                                    </div>
                                </div>

                                    <div className="slide-in-left stagger-delay-3">
                                        <label className="form-label">
                                        Address *
                                    </label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.address || ''}
                                        onChange={(e) => handleInputChange('address', e.target.value)}
                                            className="form-input w-full"
                                            placeholder="Your current address"
                                    />
                                </div>

                                    <div className="slide-in-right stagger-delay-4">
                                        <label className="block text-sm font-medium mb-3 text-white">
                                        Preferred Job Location *
                                    </label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.preferred_job_location || ''}
                                        onChange={(e) => handleInputChange('preferred_job_location', e.target.value)}
                                            className="w-full px-4 py-3 rounded-xl border transition-all focus:outline-none focus:ring-2 form-bg-dark border-white/20 text-white placeholder-white/50 focus:ring-purple-500 focus:border-purple-500"
                                            placeholder="City, Country or Remote"
                                    />
                                </div>

                                    <div className="slide-in-left stagger-delay-5">
                                        <label className="form-label">
                                        Experience *
                                    </label>
                                    <select
                                        required
                                        value={formData.experience || ''}
                                        onChange={(e) => handleInputChange('experience', e.target.value)}
                                            className="form-input w-full"
                                    >
                                        <option value="" disabled>Select experience level</option>
                                        <option value="Entry Level">Entry Level</option>
                                        <option value="Junior">Junior</option>
                                        <option value="Mid Level">Mid Level</option>
                                        <option value="Senior">Senior</option>
                                        <option value="Lead">Lead</option>
                                    </select>
                                </div>

                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                    <div className="slide-in-left stagger-delay-5">
                                        <label className="form-label">Profile Photo</label>
                                        <div className="flex items-center gap-3">
                                            <input type="file" accept="image/*" onChange={(e) => uploadFile(e.target.files[0], 'developer_photo', 'photo_url', setPhotoUploading)} className="form-input text-white" />
                                            {photoUploading && <span className="text-white/70 text-sm">Uploading...</span>}
                                        </div>
                                        {formData.photo_url && (
                                            <img src={formData.photo_url} alt="Profile" className="mt-3 w-24 h-24 object-cover rounded-lg border border-white/20" />
                                        )}
                                    </div>
                                    <div className="slide-in-right stagger-delay-5">
                                        <label className="form-label">Resume (PDF/DOC)</label>
                                        <div className="flex items-center gap-3">
                                            <input type="file" accept=".pdf,.doc,.docx" onChange={(e) => uploadFile(e.target.files[0], 'developer_resume', 'resume_url', setResumeUploading)} className="form-input text-white" />
                                            {resumeUploading && <span className="text-white/70 text-sm">Uploading...</span>}
                                        </div>
                                        {formData.resume_url && (
                                            <a href={formData.resume_url} target="_blank" rel="noopener noreferrer" className="text-blue-400 underline mt-3 inline-block">View uploaded resume</a>
                                        )}
                                    </div>
                                </div>

                                    <div className="slide-in-left stagger-delay-5">
                                        <label className="form-label">
                                        Short Description *
                                    </label>
                                    <textarea
                                        required
                                        value={formData.short_description || ''}
                                        onChange={(e) => handleInputChange('short_description', e.target.value)}
                                            className="form-input w-full"
                                            placeholder="Tell employers about yourself, your experience, and what you're looking for..."
                                        rows="4"
                                    />
                                </div>

                                    <div className="slide-in-right stagger-delay-5">
                                        <label className="block text-sm font-medium mb-3 text-white">
                                            Skills *
                                        </label>
                                        <div className="space-y-3">
                                            <div className="flex space-x-2">
                                                <input
                                                    type="text"
                                                    value={newSkill}
                                                    onChange={(e) => setNewSkill(e.target.value)}
                                                    onKeyPress={handleSkillKeyPress}
                                                    placeholder="Add a skill..."
                                                    className="form-input flex-1"
                                                />
                                                <button
                                                    type="button"
                                                    onClick={addSkill}
                                                    className="btn-primary px-6 py-3"
                                                >
                                                    Add
                                                </button>
                                            </div>
                                            <div className="flex flex-wrap gap-2">
                                                {skills.map((skill, index) => (
                                                    <span
                                                        key={index}
                                                        className="skill-tag flex items-center space-x-2"
                                                    >
                                                        <span>{skill}</span>
                                                        <button
                                                            type="button"
                                                            onClick={() => removeSkill(skill)}
                                                            className="text-white/70 hover:text-white text-sm"
                                                        >
                                                            ×
                                                        </button>
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                            </>
                        ) : (
                            // Employer Profile Fields
                            <>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                        <div className="slide-in-left stagger-delay-1">
                                            <label className="form-label">
                                            Your Name *
                                        </label>
                                        <input
                                            type="text"
                                            required
                                            value={formData.name || ''}
                                            onChange={(e) => handleInputChange('name', e.target.value)}
                                                className="form-input w-full"
                                            placeholder="Your full name"
                                        />
                                    </div>
                                        <div className="slide-in-right stagger-delay-2">
                                            <label className="form-label">
                                            Company Name *
                                        </label>
                                        <input
                                            type="text"
                                            required
                                            value={formData.company_name || ''}
                                            onChange={(e) => handleInputChange('company_name', e.target.value)}
                                                className="form-input w-full"
                                            placeholder="Your company name"
                                        />
                                    </div>
                                </div>

                                    <div className="slide-in-left stagger-delay-3">
                                        <label className="form-label">
                                        Company Location *
                                    </label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.company_location || ''}
                                        onChange={(e) => handleInputChange('company_location', e.target.value)}
                                            className="form-input w-full"
                                        placeholder="City, Country"
                                    />
                                </div>

                                    <div className="slide-in-right stagger-delay-4">
                                        <label className="form-label">
                                        Company Description
                                    </label>
                                    <textarea
                                        value={formData.company_description || ''}
                                        onChange={(e) => handleInputChange('company_description', e.target.value)}
                                            className="form-input w-full"
                                        placeholder="Tell us about your company, mission, and culture..."
                                        rows="4"
                                    />
                                </div>

                                <div className="slide-in-left stagger-delay-5">
                                    <label className="form-label">Company Logo</label>
                                    <div className="flex items-center gap-3">
                                        <input type="file" accept="image/*" onChange={(e) => uploadFile(e.target.files[0], 'employer_logo', 'company_logo_url', setLogoUploading)} className="form-input text-white" />
                                        {logoUploading && <span className="text-white/70 text-sm">Uploading...</span>}
                                    </div>
                                    {formData.company_logo_url && (
                                        <img src={formData.company_logo_url} alt="Company Logo" className="mt-3 w-24 h-24 object-cover rounded-lg border border-white/20" />
                                    )}
                                </div>
                            </>
                        )}

                            <div className="slide-in-up stagger-delay-4">
                        <button
                            type="submit"
                            disabled={isLoading}
                                    className="btn-primary w-full py-4 px-6 text-lg"
                                >
                                    {isLoading ? (
                                        <div className="flex items-center justify-center">
                                            <div className="loading-spinner mr-2"></div>
                                            {existingProfile ? 'Updating Profile...' : 'Creating Profile...'}
                                        </div>
                                    ) : (existingProfile ? 'Update Profile' : 'Complete Profile')}
                        </button>
                            </div>
                    </form>
                    </div>
                </div>
            );
        }

        // Developer Dashboard Component
        function DeveloperDashboard({ user, profile, onSignOut, showToast, onProfileUpdate }) {
            const [jobs, setJobs] = React.useState([]);
            const [applications, setApplications] = React.useState([]);
            const [notifications, setNotifications] = React.useState([]);
            const [activeTab, setActiveTab] = React.useState('jobs');
            const [loading, setLoading] = React.useState(true);
            const [searchTerm, setSearchTerm] = React.useState('');
            const [filterLocation, setFilterLocation] = React.useState('');
            const [filterSkills, setFilterSkills] = React.useState('');
            const [showProfileModal, setShowProfileModal] = React.useState(false);

            React.useEffect(() => {
                loadData();
            }, []);

            React.useEffect(() => {
                if (showProfileModal) {
                    document.body.classList.add('no-scroll');
                } else {
                    document.body.classList.remove('no-scroll');
                }
                return () => document.body.classList.remove('no-scroll');
            }, [showProfileModal]);

            const loadData = async () => {
                try {
                    console.log('Loading dashboard data for developer:', profile.id);
                    
                    // Load available jobs using server API
                    const jobsResponse = await fetch('/api/jobs?status=active');
                    if (jobsResponse.ok) {
                        const jobsData = await jobsResponse.json();
                        if (jobsData.success) {
                            console.log('Jobs loaded via API:', jobsData.jobs.length);
                            setJobs(jobsData.jobs);
                        } else {
                            console.error('Jobs API error:', jobsData.error);
                            showToast('Error loading jobs', 'error');
                        }
                    } else {
                        console.error('Jobs API failed:', jobsResponse.status);
                        showToast('Failed to load jobs', 'error');
                    }

                    // Load user's applications using server API
                    try {
                        const applicationsResponse = await fetch(`/api/applications/developer/${profile.id}`);
                        if (applicationsResponse.ok) {
                            const applicationsData = await applicationsResponse.json();
                            if (applicationsData.success) {
                                console.log('Applications loaded:', applicationsData.applications.length);
                                setApplications(applicationsData.applications);
                            }
                        } else {
                            console.log('No applications found or API error');
                            setApplications([]);
                        }
                    } catch (appError) {
                        console.log('Applications loading error (non-critical):', appError);
                        setApplications([]);
                    }

                    // Load notifications from localStorage
                    loadNotifications();
                } catch (error) {
                    console.error('Error loading dashboard data:', error);
                    showToast('Failed to load dashboard data', 'error');
                } finally {
                    setLoading(false);
                }
            };

            React.useEffect(() => {
                // Set up interval to check for new notifications
                const interval = setInterval(() => {
                    loadNotifications();
                }, 10000); // Check every 10 seconds

                return () => clearInterval(interval);
            }, []);

            const loadNotifications = () => {
                try {
                    // Load notifications from localStorage
                    const key = `notifications_${profile.id}`;
                    const saved = localStorage.getItem(key);
                    if (saved) {
                        const notificationsData = JSON.parse(saved);
                        // Convert timestamp to readable format
                        const formattedNotifications = notificationsData.map(notification => ({
                            ...notification,
                            time: formatTimeAgo(notification.timestamp)
                        }));
                        setNotifications(formattedNotifications);
                    } else {
                        setNotifications([]);
                    }
                } catch (error) {
                    console.error('Error loading notifications:', error);
                    setNotifications([]);
                }
            };

            const formatTimeAgo = (timestamp) => {
                const now = new Date();
                const notificationTime = new Date(timestamp);
                const diffInSeconds = Math.floor((now - notificationTime) / 1000);
                
                if (diffInSeconds < 60) return 'Just now';
                if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;
                if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;
                if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 86400)} days ago`;
                return notificationTime.toLocaleDateString();
            };

            const markNotificationAsRead = (notificationId) => {
                try {
                    const key = `notifications_${profile.id}`;
                    const saved = localStorage.getItem(key);
                    if (saved) {
                        const notificationsData = JSON.parse(saved);
                        const updatedNotifications = notificationsData.map(n => 
                            n.id === notificationId ? { ...n, read: true } : n
                        );
                        localStorage.setItem(key, JSON.stringify(updatedNotifications));
                        
                        // Update state
                        const formattedNotifications = updatedNotifications.map(notification => ({
                            ...notification,
                            time: formatTimeAgo(notification.timestamp)
                        }));
                        setNotifications(formattedNotifications);
                    }
                } catch (error) {
                    console.error('Error marking notification as read:', error);
                }
            };

            const markAllAsRead = () => {
                try {
                    const key = `notifications_${profile.id}`;
                    const saved = localStorage.getItem(key);
                    if (saved) {
                        const notificationsData = JSON.parse(saved);
                        const updatedNotifications = notificationsData.map(n => ({ ...n, read: true }));
                        localStorage.setItem(key, JSON.stringify(updatedNotifications));
                        
                        // Update state
                        const formattedNotifications = updatedNotifications.map(notification => ({
                            ...notification,
                            time: formatTimeAgo(notification.timestamp)
                        }));
                        setNotifications(formattedNotifications);
                    }
                } catch (error) {
                    console.error('Error marking all notifications as read:', error);
                }
            };

            const applyForJob = async (jobId, coverLetter = '') => {
                try {
                    console.log('Applying for job:', jobId, 'with cover letter:', coverLetter);
                    
                    const response = await fetch('/api/applications', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            jobId: jobId,
                            developerId: profile.id,
                            coverLetter: coverLetter
                        })
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`Server error: ${response.status} - ${errorText}`);
                    }

                    const data = await response.json();
                    
                    if (data.success) {
                        console.log('Application submitted successfully:', data.application);
                        
                        // Reload data to get updated applications
                    await loadData();
                    
                    // Show success notification
                    showToast('Application submitted successfully!', 'success');
                    const notification = {
                        id: Date.now(),
                        message: 'Application submitted successfully!',
                        time: 'Just now',
                        type: 'success'
                    };
                    setNotifications(prev => [notification, ...prev.slice(0, 4)]);
                    } else {
                        throw new Error(data.error || 'Failed to submit application');
                    }
                } catch (error) {
                    console.error('Error submitting application:', error);
                    // Show error notification
                    showToast(`Error submitting application: ${error.message}`, 'error');
                    const notification = {
                        id: Date.now(),
                        message: `Error submitting application: ${error.message}`,
                        time: 'Just now',
                        type: 'error'
                    };
                    setNotifications(prev => [notification, ...prev.slice(0, 4)]);
                }
            };

            const filteredJobs = jobs.filter(job => {
                const matchesSearch = job.job_role.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    (job.employer_profiles && job.employer_profiles.company_name && 
                                     job.employer_profiles.company_name.toLowerCase().includes(searchTerm.toLowerCase()));
                const matchesLocation = !filterLocation || 
                                      (job.location && job.location.toLowerCase().includes(filterLocation.toLowerCase())) ||
                                      (job.employer_profiles && job.employer_profiles.company_location && 
                                       job.employer_profiles.company_location.toLowerCase().includes(filterLocation.toLowerCase()));
                const matchesSkills = !filterSkills || 
                                    (job.skills_required && Array.isArray(job.skills_required) &&
                                     job.skills_required.some(skill => skill.toLowerCase().includes(filterSkills.toLowerCase())));
                
                return matchesSearch && matchesLocation && matchesSkills;
            });

            if (loading) {
                return (
                    <div className="min-h-screen page-bg-dark flex items-center justify-center">
                        <div className="text-white text-center">
                            <div className="loading-spinner mx-auto mb-6"></div>
                            <p className="text-xl neon-glow">Loading ConnectHire<span className="loading-dots"></span></p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen page-bg-dark">
                    {/* Static Background - No Animations */}
                    <div className="absolute inset-0 pointer-events-none">
                        {/* Static gradient background - No movement */}
                        <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 opacity-100"></div>
                    </div>

                    {/* Header */}
                    <header className="relative z-10 glass-effect border-b border-white/10">
                        <div className="container-fluid max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6">
                            <div className="header-content">
                                <div className="header-left">
                                    <h1 className="dashboard-title">🚀 ConnectHire</h1>
                                    <span className="dashboard-subtitle">Developer Dashboard</span>
                                </div>
                                                                <div className="header-right">
                                    <div className="profile-info">
                                        <p className="profile-name truncate">{profile.name}</p>
                                        <p className="profile-description truncate">{profile.short_description}</p>
                                    </div>
                                    <div className="button-group">
                                        <button
                                            onClick={() => setShowProfileModal(true)}
                                            className="btn-primary"
                                        >
                                            Edit Profile
                                        </button>
                                        <button
                                            onClick={onSignOut}
                                            className="btn-secondary"
                                        >
                                            Sign Out
                                        </button>
                                        {notifications.filter(n => !n.read).length > 0 && (
                                            <div className="relative flex-shrink-0">
                                                <button
                                                    onClick={() => setActiveTab('notifications')}
                                                    className="p-1 sm:p-2 text-white/80 hover:text-white transition-colors text-lg sm:text-xl"
                                                >
                                                    📢
                                                </button>
                                                <span className="absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold">
                                                    {notifications.filter(n => !n.read).length}
                                                </span>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <div className="relative z-10 container-fluid max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-6 sm:py-8">
                        <div className="tab-nav">
                            <nav className="-mb-px flex flex-nowrap items-center gap-2 sm:gap-4 md:gap-8 overflow-x-auto no-scrollbar">
                                {[
                                    { id: 'jobs', name: 'Available Jobs', icon: '💼', count: jobs.length },
                                    { id: 'applications', name: 'My Applications', icon: '📄', count: applications.length },
                                    { id: 'notifications', name: 'Notifications', icon: '🔔', count: notifications.filter(n => !n.read).length }
                                ].map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        title={tab.name}
                                        aria-label={tab.name}
                                        className={`tab-button flex items-center gap-2 sm:gap-3 ${
                                            activeTab === tab.id ? 'active' : ''
                                        }`}
                                    >
                                        <span className="text-xl sm:text-2xl leading-none">{tab.icon}</span>
                                        <span className="hidden sm:inline">{tab.name}</span>
                                        {tab.count !== undefined && (
                                            <span className="count-badge">
                                                {tab.count}
                                            </span>
                                        )}
                                    </button>
                                ))}
                            </nav>
                        </div>

                        {/* Tab Content */}
                        {activeTab === 'jobs' && (
                            <div className="space-y-6">
                                <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-white neon-glow mb-4 sm:mb-6">Available Jobs</h2>
                                
                                {/* Search and Filters */}
                                <div className="search-container">
                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
                                    <input
                                        type="text"
                                        placeholder="Search jobs..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                            className="search-input"
                                    />
                                    <input
                                        type="text"
                                        placeholder="Filter by location..."
                                        value={filterLocation}
                                        onChange={(e) => setFilterLocation(e.target.value)}
                                            className="search-input"
                                    />
                                    <input
                                        type="text"
                                        placeholder="Filter by skills..."
                                        value={filterSkills}
                                        onChange={(e) => setFilterSkills(e.target.value)}
                                            className="search-input"
                                    />
                                    </div>
                                </div>

                                {/* Jobs Grid */}
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
                                    {filteredJobs.map((job, index) => (
                                        <JobCard 
                                            key={job.id} 
                                            job={job} 
                                            onApply={applyForJob}
                                            isApplied={applications.some(app => app.job_id === job.id)}
                                            index={index}
                                        />
                                    ))}
                                </div>
                                
                                {filteredJobs.length === 0 && (
                                    <div className="text-center text-white/70 py-12">
                                        <p className="text-lg">No jobs found matching your criteria.</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'applications' && (
                            <div className="space-y-6">
                                <h2 className="text-3xl font-bold text-white neon-glow mb-6">My Applications</h2>
                                <div className="space-y-4">
                                    {applications.map((application) => (
                                        <ApplicationCard 
                                            key={application.id} 
                                            application={application}
                                        />
                                    ))}
                                    {applications.length === 0 && (
                                        <div className="text-center text-white/70 py-12">
                                            <p className="text-lg">You haven't applied to any jobs yet.</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'notifications' && (
                            <div className="space-y-4 sm:space-y-6">
                                <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-white neon-glow mb-4 sm:mb-6">Notifications</h2>
                                <div className="space-y-3 sm:space-y-4">
                                    {notifications.length > 0 ? (
                                        <>
                                            <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 mb-4">
                                                <span className="text-white/70 text-sm">
                                                    {notifications.filter(n => !n.read).length} unread
                                                </span>
                                                <button
                                                    onClick={markAllAsRead}
                                                    className="text-purple-400 hover:text-purple-300 text-sm font-medium self-start sm:self-auto"
                                                >
                                                    Mark all as read
                                                </button>
                                            </div>
                                            {notifications.map((notification) => (
                                                <NotificationCard 
                                                    key={notification.id} 
                                                    notification={notification}
                                                    onMarkAsRead={() => markNotificationAsRead(notification.id)}
                                                />
                                            ))}
                                        </>
                                    ) : (
                                        <div className="text-center py-8 sm:py-12">
                                            <div className="text-4xl sm:text-6xl mb-4">📢</div>
                                            <p className="text-white/70 text-lg sm:text-xl">No notifications yet</p>
                                            <p className="text-white/50 text-sm mt-2 px-4">You'll see notifications here when employers interact with your profile</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Profile Edit Modal */}
                        {showProfileModal && (
                            <div className="modal-overlay fixed inset-0 z-50 p-0 sm:p-4 overflow-y-auto">
                                <div className="w-full max-w-2xl mx-auto mt-4 sm:mt-10 p-4 sm:p-6">
                                    <div className="bg-white/0">
                                    <div className="flex items-center justify-between mb-6">
                                        <h3 className="text-2xl font-bold text-white neon-glow">Edit Profile</h3>
                                        <button
                                            onClick={() => setShowProfileModal(false)}
                                            className="text-white/60 hover:text-white text-2xl hover-3d"
                                        >
                                            ✕
                                        </button>
                                    </div>
                                    
                                    <ProfileForm 
                                        user={user}
                                        role="developer"
                                        isModal={true}
                                        onComplete={(updatedProfile) => {
                                            setShowProfileModal(false);
                                            // Update the profile in the parent component state
                                            onProfileUpdate(updatedProfile);
                                        }}
                                        existingProfile={profile}
                                        showToast={showToast}
                                    />
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Job Card Component
        function JobCard({ job, onApply, isApplied, index }) {
            const [showApplyModal, setShowApplyModal] = React.useState(false);
            const [coverLetter, setCoverLetter] = React.useState('');
            const [isSubmitting, setIsSubmitting] = React.useState(false);

            const handleApply = async () => {
                if (!coverLetter.trim()) {
                    alert('Please provide a cover letter to apply for this position.');
                    return;
                }

                setIsSubmitting(true);
                try {
                    await onApply(job.id, coverLetter);
                    setShowApplyModal(false);
                    setCoverLetter('');
                } finally {
                    setIsSubmitting(false);
                }
            };

            return (
                <>
                                            <div className={`card bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-4 sm:p-6 border border-gray-200 hover-3d slide-in-3d transform-3d`} 
                         style={{animationDelay: `${index * 0.1}s`}}>
                        <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0 mb-4">
                            <div className="flex items-center gap-3">
                                <div className={`w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${index % 4 === 0 ? 'bg-gradient-to-br from-purple-100 to-pink-100' : index % 4 === 1 ? 'bg-gradient-to-br from-blue-100 to-cyan-100' : index % 4 === 2 ? 'bg-gradient-to-br from-green-100 to-emerald-100' : 'bg-gradient-to-br from-orange-100 to-red-100'}`}>
                                    <span className="text-lg sm:text-2xl">🏢</span>
                                </div>
                                <div className="min-w-0 flex-1">
                                    <h3 className="font-bold text-gray-900 text-base sm:text-lg neon-glow truncate">{job.job_role}</h3>
                                    <p className="text-gray-600 text-sm sm:text-base truncate">{job.employer_profiles ? job.employer_profiles.company_name : 'Company'}</p>
                                </div>
                            </div>
                            <span className={`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-full font-medium self-start sm:self-auto ${index % 4 === 0 ? 'bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800' : index % 4 === 1 ? 'bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800' : index % 4 === 2 ? 'bg-gradient-to-r from-green-100 to-emerald-100 text-green-800' : 'bg-gradient-to-r from-orange-100 to-red-100 text-orange-800'}`}>
                                ${job.salary_min}-${job.salary_max}
                            </span>
                        </div>

                        <p className="text-gray-600 mb-4 line-clamp-2">{job.short_description}</p>

                        <div className="space-y-2 mb-4">
                            <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0 text-sm text-gray-600">
                                <span className="font-medium">Location:</span>
                                <span className="sm:ml-2 truncate">{job.location || (job.employer_profiles ? job.employer_profiles.company_location : 'Remote')}</span>
                            </div>
                            <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0 text-sm text-gray-600">
                                <span className="font-medium">Type:</span>
                                <span className="sm:ml-2 capitalize">{job.job_type}</span>
                            </div>
                            <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0 text-sm text-gray-600">
                                <span className="font-medium">Experience:</span>
                                <span className="sm:ml-2 capitalize">{job.experience_level}</span>
                            </div>
                        </div>

                        <div className="mb-4">
                            <div className="text-sm text-gray-600 mb-2">Skills Required:</div>
                            <div className="flex flex-wrap gap-1 sm:gap-2">
                                {job.skills_required && Array.isArray(job.skills_required) ? (
                                    <>
                                        {job.skills_required.slice(0, 3).map((skill, idx) => (
                                            <span key={idx} className="skill-tag text-xs">
                                                {skill}
                                            </span>
                                        ))}
                                        {job.skills_required.length > 3 && (
                                            <span className="text-gray-500 text-xs">+{job.skills_required.length - 3} more</span>
                                        )}
                                    </>
                                ) : (
                                    <span className="text-gray-500 text-xs">No specific skills listed</span>
                                )}
                            </div>
                        </div>

                        <button
                            onClick={() => isApplied ? null : setShowApplyModal(true)}
                            disabled={isApplied}
                            className={`w-full py-2 sm:py-3 px-3 sm:px-4 rounded-xl font-medium transition-all text-sm sm:text-base ${
                                isApplied
                                    ? 'bg-gray-100 text-gray-500 cursor-not-allowed'
                                    : `${index % 4 === 0 ? 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700' : index % 4 === 1 ? 'bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700' : index % 4 === 2 ? 'bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700' : 'bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700'} text-white hover-lift pulse-border neon-glow`
                            }`}
                        >
                            {isApplied ? '✓ Applied' : 'Apply Now'}
                        </button>
                    </div>

                    {/* Apply Modal */}
                    {showApplyModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4">
                            <div className="bg-white rounded-2xl p-4 sm:p-6 w-full max-w-md slide-up">
                                <div className="flex items-center justify-between mb-4">
                                    <h3 className="text-xl font-bold text-gray-900">Apply for {job.job_role}</h3>
                                    <button
                                        onClick={() => setShowApplyModal(false)}
                                        className="text-gray-400 hover:text-gray-600"
                                    >
                                        ✕
                                    </button>
                                </div>
                                
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Cover Letter *
                                    </label>
                                    <textarea
                                        value={coverLetter}
                                        onChange={(e) => setCoverLetter(e.target.value)}
                                        placeholder="Tell us why you're the perfect fit for this position..."
                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white"
                                        rows="4"
                                        required
                                    />
                                </div>

                                <div className="flex flex-col sm:flex-row gap-2 sm:gap-3">
                                    <button
                                        onClick={() => setShowApplyModal(false)}
                                        className="flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm sm:text-base"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={handleApply}
                                        disabled={isSubmitting || !coverLetter.trim()}
                                        className="flex-1 py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 text-sm sm:text-base"
                                    >
                                        {isSubmitting ? 'Submitting...' : 'Submit Application'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        }

        // Application Card Component
        function ApplicationCard({ application }) {
            const [showDetails, setShowDetails] = React.useState(false);
            
            const getStatusColor = (status) => {
                switch (status) {
                    case 'accepted': return 'bg-green-100 text-green-800';
                    case 'rejected': return 'bg-red-100 text-red-800';
                    case 'pending': return 'bg-yellow-100 text-yellow-800';
                    case 'reviewed': return 'bg-blue-100 text-blue-800';
                    case 'shortlisted': return 'bg-purple-100 text-purple-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            };

            const getStatusIcon = (status) => {
                switch (status) {
                    case 'accepted': return '✅';
                    case 'rejected': return '❌';
                    case 'pending': return '⏳';
                    case 'reviewed': return '👁️';
                    case 'shortlisted': return '⭐';
                    default: return '📋';
                }
            };

            return (
                <div className="bg-white rounded-2xl shadow-lg p-4 sm:p-6 border border-gray-200 hover-3d transform-3d slide-in-3d">
                    <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 mb-4">
                        <div className="min-w-0 flex-1">
                            <h3 className="font-bold text-gray-900 text-base sm:text-lg truncate">
                                {application.jobs?.job_role}
                            </h3>
                            <p className="text-gray-600 text-sm sm:text-base truncate">
                                {application.jobs?.employer_profiles?.company_name}
                            </p>
                        </div>
                        <div className="flex items-center gap-2 flex-shrink-0">
                            <span className={`px-3 py-1 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-medium ${getStatusColor(application.status)}`}>
                                {getStatusIcon(application.status)} {application.status.charAt(0).toUpperCase() + application.status.slice(1)}
                            </span>
                        </div>
                    </div>

                    <div className="space-y-2 text-sm text-gray-600 mb-4">
                        <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0">
                            <span className="font-medium w-20 flex-shrink-0">Applied:</span>
                            <span>{new Date(application.applied_at).toLocaleDateString()}</span>
                        </div>
                        <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0">
                            <span className="font-medium w-20 flex-shrink-0">Salary:</span>
                            <span>${application.jobs?.salary_min}-${application.jobs?.salary_max}</span>
                        </div>
                        <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0">
                            <span className="font-medium w-20 flex-shrink-0">Location:</span>
                            <span className="truncate">{application.jobs?.location}</span>
                        </div>
                        {application.reviewed_at && (
                            <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0">
                                <span className="font-medium w-20 flex-shrink-0">Reviewed:</span>
                                <span>{new Date(application.reviewed_at).toLocaleDateString()}</span>
                            </div>
                        )}
                    </div>

                    {application.cover_letter && (
                        <div className="mb-4">
                            <button
                                onClick={() => setShowDetails(!showDetails)}
                                className="text-purple-600 hover:text-purple-700 text-sm font-medium"
                            >
                                {showDetails ? 'Hide' : 'Show'} Cover Letter
                            </button>
                            {showDetails && (
                                <div className="mt-2 p-3 bg-gray-50 rounded-lg">
                                    <p className="text-sm text-gray-700">{application.cover_letter}</p>
                                </div>
                            )}
                        </div>
                    )}

                    {application.notes && (
                        <div className="p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <p className="text-sm text-blue-800">
                                <strong>Employer Note:</strong> {application.notes}
                            </p>
                        </div>
                    )}
                </div>
            );
        }

        // Notification Card Component
        function NotificationCard({ notification, onMarkAsRead }) {
            const getNotificationIcon = (type) => {
                switch (type) {
                    case 'success': return '✅';
                    case 'warning': return '⚠️';
                    case 'error': return '❌';
                    case 'info': return 'ℹ️';
                    case 'shortlisted': return '⭐';
                    default: return '📢';
                }
            };

            const getNotificationColor = (type) => {
                switch (type) {
                    case 'success': return 'bg-green-500';
                    case 'warning': return 'bg-yellow-500';
                    case 'error': return 'bg-red-500';
                    case 'info': return 'bg-blue-500';
                    case 'shortlisted': return 'bg-purple-500';
                    default: return 'bg-purple-500';
                }
            };

            const getNotificationTitle = (type) => {
                switch (type) {
                    case 'shortlisted': return 'Shortlisted!';
                    case 'success': return 'Success';
                    case 'warning': return 'Warning';
                    case 'error': return 'Error';
                    case 'info': return 'Information';
                    default: return 'Notification';
                }
            };

            return (
                <div className={`bg-white rounded-2xl shadow-lg p-3 sm:p-4 border border-gray-200 hover-3d transform-3d slide-in-3d ${
                    !notification.read ? 'ring-2 ring-purple-200 bg-purple-50' : ''
                }`}>
                    <div className="flex items-start gap-2 sm:gap-3">
                        <div className={`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white text-sm sm:text-lg flex-shrink-0 ${getNotificationColor(notification.type)}`}>
                            {getNotificationIcon(notification.type)}
                        </div>
                        <div className="flex-1 min-w-0">
                            <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-2">
                                <div className="flex items-center gap-2">
                                    <h4 className="text-gray-900 font-semibold text-xs sm:text-sm uppercase tracking-wide truncate">
                                        {getNotificationTitle(notification.type)}
                                    </h4>
                                    {!notification.read && (
                                        <span className="w-2 h-2 bg-purple-500 rounded-full flex-shrink-0"></span>
                                    )}
                                </div>
                                <span className="text-xs text-gray-400 flex-shrink-0">{notification.time}</span>
                            </div>
                            <p className="text-gray-700 mt-1 leading-relaxed text-sm sm:text-base break-words">{notification.message}</p>
                            {notification.employer_name && (
                                <div className="mt-2 flex items-center gap-2">
                                    <span className="text-xs text-gray-500">From:</span>
                                    <span className="text-sm font-medium text-purple-600 truncate">{notification.employer_name}</span>
                                </div>
                            )}
                            {!notification.read && onMarkAsRead && (
                                <div className="mt-3 pt-3 border-t border-gray-100">
                                    <button
                                        onClick={onMarkAsRead}
                                        className="text-purple-600 hover:text-purple-700 text-sm font-medium"
                                    >
                                        Mark as read
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // Toast Notification Component
        function ToastNotification({ message, type = 'info', onClose }) {
            React.useEffect(() => {
                const timer = setTimeout(() => {
                    onClose();
                }, 5000);

                return () => clearTimeout(timer);
            }, [onClose]);

            const getToastColor = (type) => {
                switch (type) {
                    case 'success': return 'bg-green-500';
                    case 'warning': return 'bg-yellow-500';
                    case 'error': return 'bg-red-500';
                    case 'info': return 'bg-blue-500';
                    default: return 'bg-purple-500';
                }
            };

            const getToastIcon = (type) => {
                switch (type) {
                    case 'success': return '✅';
                    case 'warning': return '⚠️';
                    case 'error': return '❌';
                    case 'info': return 'ℹ️';
                    default: return '📢';
                }
            };

            return (
                <div className={`fixed top-4 right-4 z-50 ${getToastColor(type)} text-white px-6 py-3 rounded-lg shadow-lg slide-in-right`}>
                    <div className="flex items-center space-x-2">
                        <span className="text-lg">{getToastIcon(type)}</span>
                        <span className="font-medium">{message}</span>
                        <button
                            onClick={onClose}
                            className="ml-4 text-white hover:text-gray-200"
                        >
                            ✕
                        </button>
                    </div>
                </div>
            );
        }

        // Employer Dashboard Component
        function EmployerDashboard({ user, profile, onSignOut, showToast, onProfileUpdate }) {
            const [jobs, setJobs] = React.useState([]);
            const [applications, setApplications] = React.useState([]);
            const [developers, setDevelopers] = React.useState([]);
            const [shortlistedDevelopers, setShortlistedDevelopers] = React.useState([]);
            const [activeTab, setActiveTab] = React.useState('post-job');
            const [loading, setLoading] = React.useState(true);
            const [showProfileModal, setShowProfileModal] = React.useState(false);

            React.useEffect(() => {
                loadData();
            }, []);

            React.useEffect(() => {
                if (showProfileModal) {
                    document.body.classList.add('no-scroll');
                } else {
                    document.body.classList.remove('no-scroll');
                }
                return () => document.body.classList.remove('no-scroll');
            }, [showProfileModal]);

            const loadData = async () => {
                try {
                    console.log('Loading dashboard data for employer:', profile.id);
                    
                    // Load employer's jobs using server API
                    const jobsResponse = await fetch(`/api/jobs/employer/${profile.id}`);
                    if (jobsResponse.ok) {
                        const jobsData = await jobsResponse.json();
                        if (jobsData.success) {
                            console.log('Jobs loaded via API:', jobsData.jobs.length);
                            setJobs(jobsData.jobs);
                        } else {
                            console.error('Jobs API error:', jobsData.error);
                            showToast('Error loading jobs', 'error');
                        }
                    } else {
                        console.error('Jobs API failed:', jobsResponse.status);
                        showToast('Failed to load jobs', 'error');
                    }

                    // Load applications for employer's jobs using server API
                    try {
                        const applicationsResponse = await fetch(`/api/applications/employer/${profile.id}`);
                        if (applicationsResponse.ok) {
                            const applicationsData = await applicationsResponse.json();
                            if (applicationsData.success) {
                                console.log('Applications loaded:', applicationsData.applications.length);
                                setApplications(applicationsData.applications);
                            }
                        } else {
                            console.log('No applications found or API error');
                            setApplications([]);
                        }
                    } catch (appError) {
                        console.log('Applications loading error (non-critical):', appError);
                        setApplications([]);
                    }

                    // Load available developers using server API
                    try {
                        const developersResponse = await fetch('/api/developer-profiles');
                        if (developersResponse.ok) {
                            const developersData = await developersResponse.json();
                            if (developersData.success) {
                                console.log('Developers loaded:', developersData.developers.length);
                                setDevelopers(developersData.developers);
                            } else {
                                console.error('Developers API error:', developersData.error);
                                setDevelopers([]);
                            }
                        } else {
                            console.error('Developers API failed:', developersResponse.status);
                            setDevelopers([]);
                        }
                    } catch (devError) {
                        console.log('Developers loading error (non-critical):', devError);
                        setDevelopers([]);
                    }
                } catch (error) {
                    console.error('Error loading dashboard data:', error);
                    showToast('Failed to load dashboard data', 'error');
                } finally {
                    setLoading(false);
                }
            };

            React.useEffect(() => {
                if (developers.length > 0) {
                    loadShortlistedDevelopers();
                }
            }, [developers]);

            const loadShortlistedDevelopers = async () => {
                try {
                    // Load shortlisted developers from localStorage for now
                    // In a real app, this would come from the database
                    const saved = localStorage.getItem(`shortlisted_developers_${profile.id}`);
                    if (saved) {
                        const shortlistedIds = JSON.parse(saved);
                        // Filter developers to get shortlisted ones
                        if (developers.length > 0) {
                            const shortlisted = developers.filter(d => shortlistedIds.includes(d.id));
                            setShortlistedDevelopers(shortlisted);
                        }
                    }
                } catch (error) {
                    console.error('Error loading shortlisted developers:', error);
                }
            };

            const handleShortlistDeveloper = async (developerId, isShortlisting) => {
                try {
                    let shortlistedIds = [];
                    const saved = localStorage.getItem(`shortlisted_developers_${profile.id}`);
                    if (saved) {
                        shortlistedIds = JSON.parse(saved);
                    }

                    if (isShortlisting) {
                        // Add to shortlist
                        if (!shortlistedIds.includes(developerId)) {
                            shortlistedIds.push(developerId);
                            showToast('Developer added to shortlist!', 'success');
                            
                            // Send notification to developer
                            await sendNotificationToDeveloper(developerId, 'shortlisted');
                        }
                    } else {
                        // Remove from shortlist
                        shortlistedIds = shortlistedIds.filter(id => id !== developerId);
                        showToast('Developer removed from shortlist', 'info');
                    }

                    // Save to localStorage
                    localStorage.setItem(`shortlisted_developers_${profile.id}`, JSON.stringify(shortlistedIds));
                    
                    // Update state
                    if (developers.length > 0) {
                        const shortlisted = developers.filter(d => shortlistedIds.includes(d.id));
                        setShortlistedDevelopers(shortlisted);
                    }
                } catch (error) {
                    console.error('Error updating shortlist:', error);
                    showToast('Error updating shortlist', 'error');
                }
            };

            const sendNotificationToDeveloper = async (developerId, type) => {
                try {
                    // In a real app, this would send to the database
                    // For now, we'll simulate it
                    const notification = {
                        id: Date.now(),
                        type: type,
                        message: `You have been shortlisted by ${profile.company_name || profile.name}!`,
                        timestamp: new Date().toISOString(),
                        read: false,
                        employer_id: profile.id,
                        employer_name: profile.company_name || profile.name
                    };

                    // Store in localStorage for the developer
                    const key = `notifications_${developerId}`;
                    const existing = localStorage.getItem(key);
                    const notifications = existing ? JSON.parse(existing) : [];
                    notifications.unshift(notification);
                    localStorage.setItem(key, JSON.stringify(notifications.slice(0, 50))); // Keep last 50
                } catch (error) {
                    console.error('Error sending notification:', error);
                }
            };

            if (loading) {
                return (
                    <div className="min-h-screen page-bg-dark flex items-center justify-center">
                        <div className="text-white text-center">
                            <div className="loading-spinner mx-auto mb-6"></div>
                            <p className="text-xl neon-glow">Loading ConnectHire<span className="loading-dots"></span></p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen page-bg-dark">
                    {/* Static Background - No Animations */}
                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                        {/* Static gradient background - No movement */}
                        <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 opacity-100"></div>
                    </div>

                    {/* Header */}
                    <header className="relative z-10 glass-effect border-b border-white/10">
                        <div className="container-fluid max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6">
                            <div className="header-content">
                                <div className="header-left">
                                    <h1 className="dashboard-title">🚀 ConnectHire</h1>
                                    <span className="dashboard-subtitle">Employer Dashboard</span>
                                </div>
                                <div className="header-right">
                                    <div className="profile-info">
                                        <p className="profile-name">{profile.name}</p>
                                        <p className="profile-description">{profile.company_name}</p>
                                    </div>
                                    <div className="button-group">
                                    <button
                                        onClick={() => setShowProfileModal(true)}
                                            className="btn-primary"
                                    >
                                        Edit Profile
                                    </button>
                                    <button
                                        onClick={onSignOut}
                                            className="btn-secondary"
                                    >
                                        Sign Out
                                    </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <div className="relative z-10 container-fluid max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-6 sm:py-8">
                        <div className="tab-nav">
                            <nav className="-mb-px flex flex-nowrap items-center gap-2 sm:gap-4 md:gap-8 overflow-x-auto no-scrollbar">
                                {(window.innerWidth < 640
                                    ? [
                                        { id: 'developers', name: 'Browse Developers', icon: '🧑‍💻', count: developers?.length || 0 },
                                        { id: 'applications', name: 'Applications', icon: '📨', count: applications?.length || 0 },
                                        { id: 'my-jobs', name: 'My Jobs', icon: '📋', count: jobs?.length || 0 }
                                      ]
                                    : [
                                        { id: 'post-job', name: 'Post Job', icon: '➕' },
                                        { id: 'my-jobs', name: 'My Jobs', icon: '📋', count: jobs?.length || 0 },
                                        { id: 'applications', name: 'Applications', icon: '📨', count: applications?.length || 0 },
                                        { id: 'developers', name: 'Browse Developers', icon: '🧑‍💻', count: developers?.length || 0 }
                                      ]).map((tab) => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        title={tab.name}
                                        aria-label={tab.name}
                                        className={`tab-button flex items-center gap-2 sm:gap-3 ${
                                            activeTab === tab.id ? 'active' : ''
                                        }`}
                                    >
                                        <span className="text-xl sm:text-2xl leading-none">{tab.icon}</span>
                                        <span className="hidden sm:inline">{tab.name}</span>
                                        {tab.count !== undefined && (
                                            <span className="count-badge">
                                                {tab.count}
                                            </span>
                                        )}
                                    </button>
                                ))}
                            </nav>
                        </div>

                        {/* Tab Content */}
                        {activeTab === 'post-job' && (
                            <div>
                                <PostJobForm 
                                    employerId={profile.id}
                                    onJobPosted={() => {
                                        loadData();
                                        setActiveTab('my-jobs');
                                    }}
                                />
                            </div>
                        )}

                        {activeTab === 'my-jobs' && (
                            <div className="space-y-6">
                                <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-white neon-glow mb-4 sm:mb-6">My Job Posts</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
                                    {jobs.map((job) => (
                                        <JobRequestCard key={job.id} job={job} />
                                    ))}
                                </div>
                            </div>
                        )}

                        {activeTab === 'applications' && (
                            <div className="space-y-6">
                                <h2 className="text-3xl font-bold text-white neon-glow mb-6">Applications</h2>
                                <div className="space-y-4">
                                    {applications.map((application) => (
                                        <ApplicationReviewCard 
                                            key={application.id} 
                                            application={application}
                                            onStatusUpdate={loadData}
                                            showToast={showToast}
                                        />
                                    ))}
                                </div>
                            </div>
                        )}

                        {activeTab === 'developers' && (
                            <div className="space-y-6">
                                <h2 className="text-3xl font-bold text-white neon-glow mb-6">Available Developers</h2>
                                
                                {/* Shortlisted Developers Section */}
                                {shortlistedDevelopers.length > 0 && (
                                    <div className="mb-8">
                                        <h3 className="text-xl font-semibold text-white mb-4 flex items-center">
                                            <span className="mr-2">⭐</span>
                                            Shortlisted Developers ({shortlistedDevelopers.length})
                                        </h3>
                                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
                                            {shortlistedDevelopers.map((developer) => (
                                                <DeveloperCard 
                                                    key={developer.id} 
                                                    developer={developer} 
                                                    onShortlist={handleShortlistDeveloper}
                                                    isShortlisted={true}
                                                />
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {/* All Developers Section */}
                                <div>
                                    <h3 className="text-xl font-semibold text-white mb-4">
                                        All Developers ({developers?.length || 0})
                                    </h3>
                                    {(() => {
                                        console.log('Developers state in render:', developers);
                                        return null;
                                    })()}
                                    {developers && developers.length > 0 ? (
                                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
                                            {developers.map((developer) => (
                                                <DeveloperCard 
                                                    key={developer.id} 
                                                    developer={developer} 
                                                    onShortlist={handleShortlistDeveloper}
                                                    isShortlisted={shortlistedDevelopers.some(d => d.id === developer.id)}
                                                />
                                            ))}
                                        </div>
                                    ) : (
                                        <div className="text-center py-12">
                                            <div className="text-6xl mb-4">👨‍💻</div>
                                            <p className="text-white/70 text-xl">No developers available at the moment</p>
                                            <p className="text-white/50 text-sm mt-2">Check back later for new developer profiles</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Mobile-only FAB for Post Job */}
                        <div className="sm:hidden">
                            <button
                                onClick={() => setActiveTab('post-job')}
                                className="fab-post-job bg-transparent border border-white/30 text-white hover:border-white/60"
                                aria-label="Post Job"
                                title="Post Job"
                            >
                                ➕
                            </button>
                        </div>

                        {/* Profile Edit Modal */}
                        {showProfileModal && (
                            <div className="modal-overlay fixed inset-0 z-50 p-0 sm:p-4 overflow-y-auto">
                                <div className="w-full max-w-2xl mx-auto mt-4 sm:mt-10 p-4 sm:p-6">
                                    <div className="bg-white/0">
                                    <div className="flex items-center justify-between mb-6">
                                        <h3 className="text-2xl font-bold text-white neon-glow">Edit Profile</h3>
                                        <button
                                            onClick={() => setShowProfileModal(false)}
                                            className="text-white/60 hover:text-white text-2xl hover-3d"
                                        >
                                            ✕
                                        </button>
                                    </div>
                                    
                                    <ProfileForm 
                                        user={user}
                                        role="employer"
                                        isModal={true}
                                        onComplete={(updatedProfile) => {
                                            setShowProfileModal(false);
                                            // Update the profile in the parent component state
                                            onProfileUpdate(updatedProfile);
                                        }}
                                        existingProfile={profile}
                                        showToast={showToast}
                                    />
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Post Job Form Component
        function PostJobForm({ employerId, onJobPosted }) {
            const [formData, setFormData] = React.useState({
                job_role: '',
                skills_required: [],
                short_description: '',
                salary_min: '',
                salary_max: '',
                salary_type: 'hourly',
                location: '',
                job_type: 'full-time',
                experience_level: 'mid',
                remote_work: false
            });
            const [isLoading, setIsLoading] = React.useState(false);
            const [newSkill, setNewSkill] = React.useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsLoading(true);

                const requestBody = {
                    employerId: employerId,
                    ...formData,
                    salary_min: parseFloat(formData.salary_min),
                    salary_max: parseFloat(formData.salary_max)
                };

                try {
                    const response = await fetch('/api/jobs', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestBody)
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`Server error: ${response.status} - ${errorText}`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        setFormData({
                            job_role: '',
                            skills_required: [],
                            short_description: '',
                            salary_min: '',
                            salary_max: '',
                            salary_type: 'hourly',
                            location: '',
                            job_type: 'full-time',
                            experience_level: 'mid',
                            remote_work: false
                        });
                        onJobPosted();
                    } else {
                        throw new Error(data.error || 'Unknown error');
                    }
                } catch (error) {
                    let errorMessage = 'Error posting job. ';
                    if (error.message) {
                        errorMessage += error.message;
                    }
                    alert(errorMessage);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleInputChange = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            const addSkill = (skill) => {
                if (skill && skill.trim() && !formData.skills_required.includes(skill.trim())) {
                    setFormData(prev => ({
                        ...prev,
                        skills_required: [...prev.skills_required, skill.trim()]
                    }));
                    setNewSkill(''); // Clear the input after adding
                }
            };

            const removeSkill = (skillToRemove) => {
                setFormData(prev => ({
                    ...prev,
                    skills_required: prev.skills_required.filter(skill => skill !== skillToRemove)
                }));
            };

            return (
                <div className="max-w-3xl">
                    <h2 className="text-3xl font-bold text-gray-900 mb-8 neon-glow">Post a New Job</h2>
                    
                    <form onSubmit={handleSubmit} className="space-y-6">
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Job Role *
                                </label>
                                <input
                                    type="text"
                                    required
                                    value={formData.job_role}
                                    onChange={(e) => handleInputChange('job_role', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white placeholder-gray-500"
                                    placeholder="e.g., React Developer"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Location *
                                </label>
                                <input
                                    type="text"
                                    required
                                    value={formData.location}
                                    onChange={(e) => handleInputChange('location', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white placeholder-gray-500"
                                    placeholder="e.g., Remote, Mumbai, Delhi"
                                />
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                Skills Required *
                            </label>
                            <div className="flex flex-wrap gap-2 mb-3">
                                {formData.skills_required.map((skill, index) => (
                                    <span key={index} className="skill-tag">
                                        {skill}
                                        <button
                                            type="button"
                                            onClick={() => removeSkill(skill)}
                                            className="ml-2 hover:text-red-200"
                                        >
                                            ×
                                        </button>
                                    </span>
                                ))}
                            </div>
                            <div className="flex gap-2">
                                <input
                                    type="text"
                                    value={newSkill}
                                    onChange={(e) => setNewSkill(e.target.value)}
                                    placeholder="Add a skill"
                                    className="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white placeholder-gray-500"
                                    onKeyPress={(e) => {
                                        if (e.key === 'Enter') {
                                            e.preventDefault();
                                            addSkill(newSkill);
                                        }
                                    }}
                                />
                                <button
                                    type="button"
                                    onClick={() => addSkill(newSkill)}
                                    className="px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors"
                                >
                                    Add
                                </button>
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                Job Description *
                            </label>
                            <textarea
                                required
                                value={formData.short_description}
                                onChange={(e) => handleInputChange('short_description', e.target.value)}
                                className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white placeholder-gray-500"
                                placeholder="Describe the job requirements, responsibilities, and what you're looking for..."
                                rows="4"
                            />
                        </div>

                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Salary Type
                                </label>
                                <select
                                    value={formData.salary_type}
                                    onChange={(e) => handleInputChange('salary_type', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white"
                                >
                                    <option value="hourly">Hourly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                    <option value="project-based">Project-based</option>
                                </select>
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Min Salary
                                </label>
                                <input
                                    type="number"
                                    required
                                    value={formData.salary_min}
                                    onChange={(e) => handleInputChange('salary_min', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white placeholder-gray-500"
                                    placeholder="0"
                                    min="0"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Max Salary
                                </label>
                                <input
                                    type="number"
                                    required
                                    value={formData.salary_max}
                                    onChange={(e) => handleInputChange('salary_max', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white placeholder-gray-500"
                                    placeholder="0"
                                    min="0"
                                />
                            </div>
                        </div>

                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Job Type
                                </label>
                                <select
                                    value={formData.job_type}
                                    onChange={(e) => handleInputChange('job_type', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white"
                                >
                                    <option value="full-time">Full-time</option>
                                    <option value="part-time">Part-time</option>
                                    <option value="contract">Contract</option>
                                    <option value="freelance">Freelance</option>
                                    <option value="internship">Internship</option>
                                </select>
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-3">
                                    Experience Level
                                </label>
                                <select
                                    value={formData.experience_level}
                                    onChange={(e) => handleInputChange('experience_level', e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 bg-white"
                                >
                                    <option value="entry">Entry Level</option>
                                    <option value="junior">Junior</option>
                                    <option value="mid">Mid Level</option>
                                    <option value="senior">Senior</option>
                                    <option value="lead">Lead</option>
                                </select>
                            </div>
                        </div>

                        <div className="flex items-center">
                            <input
                                type="checkbox"
                                id="remote_work"
                                checked={formData.remote_work}
                                onChange={(e) => handleInputChange('remote_work', e.target.checked)}
                                className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                            />
                            <label htmlFor="remote_work" className="ml-2 text-sm text-gray-700">
                                Remote work available
                            </label>
                        </div>

                        <button
                            type="submit"
                            disabled={isLoading}
                            className="w-full bg-blue-600 text-white py-4 px-6 rounded-xl font-semibold hover:bg-blue-700 transition-all disabled:opacity-50 hover-lift text-lg pulse-border neon-glow"
                        >
                            {isLoading ? 'Posting Job...' : 'Post Job'}
                        </button>
                    </form>
                </div>
            );
        }

        // Job Request Card Component
        function JobRequestCard({ job }) {
            return (
                <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-200 hover-lift">
                    <div className="flex items-start justify-between mb-4">
                        <div>
                            <h3 className="font-bold text-gray-900 text-lg neon-glow">{job.job_role}</h3>
                            <p className="text-sm text-gray-600">Posted {new Date(job.created_at).toLocaleDateString()}</p>
                        </div>
                        <span className="px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full font-medium">
                            ${job.salary_min}-${job.salary_max}
                        </span>
                    </div>

                    <p className="text-gray-600 mb-4 line-clamp-2">{job.short_description}</p>

                    <div className="space-y-2 mb-4">
                        <div className="flex items-center text-sm text-gray-600">
                            <span className="font-medium">Location:</span>
                            <span className="ml-2">{job.location}</span>
                        </div>
                        <div className="flex items-center text-sm text-gray-600">
                            <span className="font-medium">Type:</span>
                            <span className="ml-2 capitalize">{job.job_type}</span>
                        </div>
                        <div className="flex items-center text-sm text-gray-600">
                            <span className="font-medium">Experience:</span>
                            <span className="ml-2 capitalize">{job.experience_level}</span>
                        </div>
                    </div>

                    <div className="text-sm text-gray-500">
                        Job ID: {job.id}
                    </div>
                </div>
            );
        }

        // Application Review Card Component
        function ApplicationReviewCard({ application, onStatusUpdate, showToast }) {
            const [isUpdating, setIsUpdating] = React.useState(false);
            const [showNotes, setShowNotes] = React.useState(false);
            const [notes, setNotes] = React.useState(application.notes || '');
            const [showCoverLetter, setShowCoverLetter] = React.useState(false);

            const updateStatus = async (status, customNotes = '') => {
                setIsUpdating(true);
                try {
                    const response = await fetch(`/api/applications/${application.id}/status`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            status,
                            notes: customNotes || notes
                        })
                    });

                    if (response.ok) {
                        onStatusUpdate();
                        setShowNotes(false);
                        showToast(`Application ${status} successfully!`, 'success');
                    } else {
                        throw new Error('Failed to update status');
                    }
                } catch (error) {
                    showToast('Error updating application status.', 'error');
                } finally {
                    setIsUpdating(false);
                }
            };

            const getStatusColor = (status) => {
                switch (status) {
                    case 'accepted': return 'bg-green-100 text-green-800';
                    case 'rejected': return 'bg-red-100 text-red-800';
                    case 'pending': return 'bg-yellow-100 text-yellow-800';
                    case 'reviewed': return 'bg-blue-100 text-blue-800';
                    case 'shortlisted': return 'bg-purple-100 text-purple-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            };

            const getStatusIcon = (status) => {
                switch (status) {
                    case 'accepted': return '✅';
                    case 'rejected': return '❌';
                    case 'pending': return '⏳';
                    case 'reviewed': return '👁️';
                    case 'shortlisted': return '⭐';
                    default: return '📋';
                }
            };

            return (
                <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-200 hover-3d transform-3d slide-in-3d">
                    <div className="flex items-start justify-between mb-4">
                        <div className="flex items-center space-x-3">
                            <div className="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                <span className="text-2xl">👨‍💻</span>
                            </div>
                            <div>
                                <h3 className="font-bold text-gray-900 text-lg neon-glow">
                                    {application.developer_profiles?.name}
                                </h3>
                                <p className="text-sm text-gray-600">
                                    Applied for {application.jobs?.job_role}
                                </p>
                                <p className="text-xs text-gray-500">
                                    {new Date(application.applied_at).toLocaleDateString()}
                                </p>
                            </div>
                        </div>
                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(application.status)}`}>
                            {getStatusIcon(application.status)} {application.status.charAt(0).toUpperCase() + application.status.slice(1)}
                        </span>
                    </div>

                    <div className="space-y-2 mb-4">
                        <div className="text-sm text-gray-600">
                            <span className="font-medium">Skills:</span> {application.developer_profiles?.skills?.join(', ')}
                        </div>
                        <div className="text-sm text-gray-600">
                            <span className="font-medium">Experience:</span> {application.developer_profiles?.experience}
                        </div>
                        <div className="text-sm text-gray-600">
                            <span className="font-medium">Location:</span> {application.developer_profiles?.preferred_job_location}
                        </div>
                        <div className="text-sm text-gray-600">
                            <span className="font-medium">Job Salary:</span> ${application.jobs?.salary_min}-${application.jobs?.salary_max}
                        </div>
                    </div>

                    {application.cover_letter && (
                        <div className="mb-4">
                            <button
                                onClick={() => setShowCoverLetter(!showCoverLetter)}
                                className="text-blue-600 hover:text-blue-700 text-sm font-medium"
                            >
                                {showCoverLetter ? 'Hide' : 'View'} Cover Letter
                            </button>
                            {showCoverLetter && (
                                <div className="mt-2 p-3 bg-gray-50 rounded-lg">
                                    <p className="text-sm text-gray-700">{application.cover_letter}</p>
                                </div>
                            )}
                        </div>
                    )}

                    {application.status === 'pending' && (
                        <div className="space-y-3">
                            <div className="flex space-x-2">
                                <button
                                    onClick={() => updateStatus('shortlisted')}
                                    disabled={isUpdating}
                                    className="flex-1 bg-purple-600 text-white py-2 px-4 rounded-xl text-sm font-medium hover:bg-purple-700 transition-colors disabled:opacity-50"
                                >
                                    ⭐ Shortlist
                                </button>
                                <button
                                    onClick={() => setShowNotes(true)}
                                    disabled={isUpdating}
                                    className="flex-1 bg-blue-600 text-white py-2 px-4 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors disabled:opacity-50"
                                >
                                    📝 Add Notes
                                </button>
                            </div>
                            <div className="flex space-x-2">
                                <button
                                    onClick={() => updateStatus('accepted')}
                                    disabled={isUpdating}
                                    className="flex-1 bg-green-600 text-white py-2 px-4 rounded-xl text-sm font-medium hover:bg-green-700 transition-colors disabled:opacity-50"
                                >
                                    ✅ Accept
                                </button>
                                <button
                                    onClick={() => updateStatus('rejected')}
                                    disabled={isUpdating}
                                    className="flex-1 bg-red-600 text-white py-2 px-4 rounded-xl text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50"
                                >
                                    ❌ Reject
                                </button>
                            </div>
                        </div>
                    )}

                    {application.status === 'shortlisted' && (
                        <div className="flex space-x-2">
                            <button
                                onClick={() => updateStatus('accepted')}
                                disabled={isUpdating}
                                className="flex-1 bg-green-600 text-white py-2 px-4 rounded-xl text-sm font-medium hover:bg-green-700 transition-colors disabled:opacity-50"
                            >
                                ✅ Accept
                            </button>
                            <button
                                onClick={() => updateStatus('rejected')}
                                disabled={isUpdating}
                                className="flex-1 bg-red-600 text-white py-2 px-4 rounded-xl text-sm font-medium hover:bg-red-700 transition-colors disabled:opacity-50"
                            >
                                ❌ Reject
                            </button>
                        </div>
                    )}

                    {/* Notes Modal */}
                    {showNotes && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 w-full max-w-md slide-up">
                                <div className="flex items-center justify-between mb-4">
                                    <h3 className="text-xl font-bold text-gray-900">Add Notes</h3>
                                    <button
                                        onClick={() => setShowNotes(false)}
                                        className="text-gray-400 hover:text-gray-600"
                                    >
                                        ✕
                                    </button>
                                </div>
                                
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Notes (optional)
                                    </label>
                                    <textarea
                                        value={notes}
                                        onChange={(e) => setNotes(e.target.value)}
                                        placeholder="Add any notes about this application..."
                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white"
                                        rows="4"
                                    />
                                </div>

                                <div className="flex space-x-3">
                                    <button
                                        onClick={() => setShowNotes(false)}
                                        className="flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={() => updateStatus('reviewed')}
                                        disabled={isUpdating}
                                        className="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
                                    >
                                        {isUpdating ? 'Updating...' : 'Save Notes'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {application.notes && (
                        <div className="mt-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <p className="text-sm text-blue-800">
                                <strong>Your Notes:</strong> {application.notes}
                            </p>
                        </div>
                    )}
                </div>
            );
        }

        // Developer Card Component
        function DeveloperCard({ developer, onShortlist, isShortlisted = false }) {
            const [showModal, setShowModal] = React.useState(false);
            
            // Handle potentially missing data
            const developerName = developer.name || 'Developer';
            const developerExperience = developer.experience || 'Not specified';
            const developerLocation = developer.preferred_job_location || 'Remote';
            const developerSkills = developer.skills && Array.isArray(developer.skills) ? developer.skills : [];
            const developerPhoto = developer.photo_url;
            const developerResume = developer.resume_url;

            const handleShortlist = (e) => {
                e.stopPropagation();
                onShortlist(developer.id, !isShortlisted);
            };

            return (
                <>
                    <div className="bg-white rounded-2xl shadow-lg p-6 border border-gray-200 cursor-pointer hover-lift transform-3d slide-in-up">
                        <div className="flex items-center space-x-3 mb-4">
                            <div className="w-12 h-12 rounded-xl flex items-center justify-center overflow-hidden">
                                {developerPhoto ? (
                                    <img 
                                        src={developerPhoto} 
                                        alt={developerName}
                                        className="w-full h-full object-cover"
                                        onError={(e) => {
                                            e.target.style.display = 'none';
                                            e.target.nextSibling.style.display = 'flex';
                                        }}
                                    />
                                ) : null}
                                <div className={`w-full h-full bg-purple-100 rounded-xl flex items-center justify-center ${developerPhoto ? 'hidden' : ''}`}>
                                    <span className="text-2xl">👨‍💻</span>
                                </div>
                            </div>
                            <div className="flex-1">
                                <h3 className="font-bold text-gray-900 text-lg hover-scale neon-glow">{developerName}</h3>
                                <p className="text-sm text-gray-600">{developerExperience}</p>
                            </div>
                            <button
                                onClick={handleShortlist}
                                className={`px-3 py-1 rounded-lg text-sm font-medium transition-all ${
                                    isShortlisted 
                                        ? 'bg-purple-600 text-white hover:bg-purple-700' 
                                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                }`}
                            >
                                {isShortlisted ? '✓ Shortlisted' : 'Shortlist'}
                            </button>
                        </div>

                        <div className="space-y-2">
                            <div className="text-sm text-gray-600">
                                <span className="font-medium">Skills:</span> {developerSkills.length > 0 ? 
                                    <>
                                        {developerSkills.slice(0, 3).join(', ')}
                                        {developerSkills.length > 3 && ` +${developerSkills.length - 3} more`}
                                    </> : 'Not specified'}
                            </div>
                            <div className="text-sm text-gray-600">
                                <span className="font-medium">Location:</span> {developerLocation}
                            </div>
                            <div className="text-sm text-gray-600">
                                <span className="font-medium">Age:</span> {developer.age || 'Not specified'}
                            </div>
                        </div>

                        <div className="mt-4 pt-4 border-t border-gray-100">
                            <button
                                onClick={() => setShowModal(true)}
                                className="w-full py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium"
                            >
                                View Full Profile
                            </button>
                        </div>
                    </div>

                    {/* Developer Profile Modal */}
                    {showModal && (
                        <div className="modal-overlay fixed inset-0 flex items-center justify-center p-4 z-50">
                            <div className="modal-content max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                                <div className="p-6">
                                    <div className="flex justify-between items-start mb-6">
                                        <div className="flex items-center space-x-4">
                                            <div className="w-20 h-20 rounded-xl flex items-center justify-center overflow-hidden">
                                                {developerPhoto ? (
                                                    <img 
                                                        src={developerPhoto} 
                                                        alt={developerName}
                                                        className="w-full h-full object-cover"
                                                        onError={(e) => {
                                                            e.target.style.display = 'none';
                                                            e.target.nextSibling.style.display = 'flex';
                                                        }}
                                                    />
                                                ) : null}
                                                <div className={`w-full h-full bg-purple-100 rounded-xl flex items-center justify-center ${developerPhoto ? 'hidden' : ''}`}>
                                                    <span className="text-4xl">👨‍💻</span>
                                                </div>
                                            </div>
                                            <div>
                                                <h2 className="text-3xl font-bold text-gray-900 slide-in-left neon-glow">{developerName}</h2>
                                                <p className="text-xl text-gray-600 slide-in-left stagger-delay-1">{developerExperience}</p>
                                                <p className="text-lg text-gray-500 slide-in-left stagger-delay-2">{developerLocation}</p>
                                            </div>
                                        </div>
                                        <div className="flex items-center space-x-3">
                                            <button
                                                onClick={handleShortlist}
                                                className={`px-4 py-2 rounded-lg font-medium transition-all ${
                                                    isShortlisted 
                                                        ? 'bg-purple-600 text-white hover:bg-purple-700' 
                                                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                                }`}
                                            >
                                                {isShortlisted ? '✓ Shortlisted' : 'Shortlist'}
                                            </button>
                                            <button
                                                onClick={() => setShowModal(false)}
                                                className="text-gray-400 hover:text-gray-600 text-2xl hover-rotate hover-scale"
                                            >
                                                ×
                                            </button>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                                        <div className="space-y-6">
                                            <div className="slide-in-up stagger-delay-2">
                                                <h3 className="text-lg font-semibold text-gray-900 mb-3 neon-glow">Skills</h3>
                                                <div className="flex flex-wrap gap-2">
                                                    {developerSkills.length > 0 ? developerSkills.map((skill, index) => (
                                                        <span key={index} className="skill-tag hover-scale">
                                                            {skill}
                                                        </span>
                                                    )) : <span className="text-gray-500">No specific skills listed</span>}
                                                </div>
                                            </div>

                                            <div className="slide-in-up stagger-delay-3">
                                                <h3 className="text-lg font-semibold text-gray-900 mb-3 neon-glow">About</h3>
                                                <p className="text-gray-600 leading-relaxed">{developer.short_description || 'No description available'}</p>
                                            </div>

                                            <div className="slide-in-up stagger-delay-4">
                                                <h3 className="text-lg font-semibold text-gray-900 mb-3 neon-glow">Personal Information</h3>
                                                <div className="space-y-2">
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-600">Age:</span>
                                                        <span className="font-medium">{developer.age || 'Not specified'}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-600">Address:</span>
                                                        <span className="font-medium">{developer.address || 'Not specified'}</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span className="text-gray-600">Preferred Location:</span>
                                                        <span className="font-medium">{developer.preferred_job_location || 'Not specified'}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="space-y-6">
                                            <div className="slide-in-up stagger-delay-5">
                                                <h3 className="text-lg font-semibold text-gray-900 mb-3 neon-glow">Resume</h3>
                                                {developerResume ? (
                                                    <div className="space-y-3">
                                                        <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                            <div className="flex items-center space-x-3">
                                                <div className="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                                    <span className="text-xl">📄</span>
                                                </div>
                                                <div className="flex-1">
                                                    <p className="font-medium text-gray-900">Resume</p>
                                                    <p className="text-sm text-gray-500">Click to view or download</p>
                                                </div>
                                            </div>
                                        </div>
                                                        <div className="flex space-x-3">
                                                            <a
                                                                href={developerResume}
                                                                target="_blank"
                                                                rel="noopener noreferrer"
                                                                className="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-center font-medium"
                                                            >
                                                                View Resume
                                                            </a>
                                                            <a
                                                                href={developerResume}
                                                                download
                                                                className="flex-1 py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-center font-medium"
                                                            >
                                                                Download
                                                            </a>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-200 text-center">
                                                        <span className="text-gray-500">No resume uploaded</span>
                                                    </div>
                                                )}
                                            </div>

                                            <div className="slide-in-up stagger-delay-6">
                                                <h3 className="text-lg font-semibold text-gray-900 mb-3 neon-glow">Contact & Actions</h3>
                                                <div className="space-y-3">
                                                    <button
                                                        onClick={handleShortlist}
                                                        className={`w-full py-3 px-4 rounded-lg font-medium transition-all ${
                                                            isShortlisted 
                                                                ? 'bg-purple-600 text-white hover:bg-purple-700' 
                                                                : 'bg-purple-100 text-purple-700 hover:bg-purple-200'
                                                        }`}
                                                    >
                                                        {isShortlisted ? '✓ Remove from Shortlist' : 'Add to Shortlist'}
                                                    </button>
                                                    <button
                                                        onClick={() => {
                                                            // TODO: Implement contact functionality
                                                            alert('Contact functionality coming soon!');
                                                        }}
                                                        className="w-full py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
                                                    >
                                                        Contact Developer
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
